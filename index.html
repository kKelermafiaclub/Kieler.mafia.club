<!doctype html>
<html lang="uk">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>–ú–∞—Ñ—ñ—è –ö–∏–ª—å ¬∑ Mafia Kiel</title>
    <meta
      name="description"
      content="–ö–ª–∞—Å–∏—á–Ω–∞ –º–∞—Ñ—ñ—è —â–æ–ø‚Äô—è—Ç–Ω–∏—Ü—ñ –≤ –ö—ñ–ª—ñ. –ê–Ω–æ–Ω—Å–∏, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –ø—Ä–∞–≤–∏–ª–∞, —Ç—É—Ä–Ω—ñ—Ä–∏, —Ä–µ–π—Ç–∏–Ω–≥, —Ñ–æ—Ç–æ/–≤—ñ–¥–µ–æ."
    />
    <meta name="theme-color" content="#07080b" />
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="grain"></div>

    <div class="wrap">
      <div class="topbar">
        <a class="brand" href="#top" aria-label="–ú–∞—Ñ—ñ—è –ö–∏–ª—å!">
          <div class="logo">K</div>
          <div>
            <h1>
              –ú–∞—Ñ—ñ—è –ö–∏–ª—å ¬∑ <span style="color: var(--gold2)">Mafia Kiel</span>
            </h1>
            <p>–ö–ª–∞—Å–∏—á–Ω–∞ –º–∞—Ñ—ñ—è —â–æ–ø‚Äô—è—Ç–Ω–∏—Ü—ñ ¬∑ Kiel</p>
          </div>
        </a>
        <div class="pillrow">
          <div class="pill">
            <span class="dot"></span> Brahmsweg 17 ¬∑ 24159 Kiel
          </div>
          <div class="pill">
            <span class="dot red"></span> Telegram: @kieler_mafia
          </div>
        </div>
      </div>

      <section class="hero" id="top">
        <div class="laser"></div>
        <div class="spark"></div>

        <div class="heroGrid">
          <div class="heroLeft">
            <div class="kicker">
              <span class="mark"></span> Kieler Mafia Club
            </div>
            <h2>MAFIA <span>FRIDAY</span> ¬∑ KIEL</h2>
            <p>
              –ù—ñ–∫–æ–ª–∏ –Ω–µ –≥—Ä–∞–≤(–ª–∞) –≤ –º–∞—Ñ—ñ—é? –ù–∞–≤—á–∏–º–æ ‚úåÔ∏è –°–ø–æ—á–∞—Ç–∫—É –∫–æ—Ä–æ—Ç–∫–∏–π
              –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å, –¥–∞–ª—ñ ‚Äî —ñ–≥—Ä–∏, —ñ–Ω—Ç—Ä–∏–≥–∏ —Ç–∞ –Ω–∞–π–∫—Ä–∞—â–∞ –∫–æ–º–ø–∞–Ω—ñ—è.
            </p>

            <div class="chips">
              <span class="chip"
                ><span class="c"></span> <b>17:30</b> –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å</span
              >
              <span class="chip"
                ><span class="c"></span> <b>18:30</b> —ñ–≥—Ä–∏</span
              >
              <span class="chip"
                ><span class="c red"></span> —ñ–Ω–∫–æ–ª–∏: <b>Total Black</b></span
              >
            </div>

            <div class="ctas">
              <a class="btn primary" id="btnSignup" href="#"
                ><span>üïµÔ∏è</span> –ó–∞–ø–∏—Å–∞—Ç–∏—Å—è</a
              >
              <a
                class="btn"
                id="btnIG"
                href="https://instagram.com/kieler.mafia.club"
                target="_blank"
                rel="noopener"
                ><span>üì∏</span> Instagram</a
              >
              <a class="btn red" href="#announcements"
                ><span>üìÖ</span> –ê–Ω–æ–Ω—Å–∏</a
              >
              <a class="btn" href="#club"><span>üñ§</span> –ü—Ä–æ –∫–ª—É–±</a>
              <a class="btn" href="#hub"><span>üèÜ</span> –†–µ–π—Ç–∏–Ω–≥</a>
              <a
                class="btn"
                href="https://t.me/kieler_mafia"
                target="_blank"
                rel="noopener"
                ><span>üì£</span> Telegram –∫–∞–Ω–∞–ª</a
              >
            </div>
          </div>

          <div class="heroRight">
            <div class="phone" aria-label="Featured Instagram reel">
              <div class="phoneTop">
                <b>Featured</b>
                <span id="heroTag">REEL</span>
              </div>
              <div class="phoneBody" id="heroEmbedWrap"></div>
            </div>
          </div>
        </div>
      </section>

      <section class="grid section">
        <div class="card" id="announcements">
          <h3>–ê–Ω–æ–Ω—Å–∏ –Ω–∞–π–±–ª–∏–∂—á–∏—Ö —ñ–≥–æ—Ä</h3>
          <p class="sub">
            –ö–Ω–æ–ø–∫–∞ ‚ÄúAdd to Calendar‚Äù –¥–æ–¥–∞—î –ø–æ–¥—ñ—é. –ó–∞–ø–∏—Å ‚Äî —á–µ—Ä–µ–∑ Telegram/DM –∞–±–æ
            email (–∫–Ω–æ–ø–∫–∞ ‚Äú–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è‚Äù).
          </p>
          <div class="events" id="events"></div>
        </div>

        <div class="card">
          <h3>–î–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –≥—Ä–∏</h3>
          <div class="countwrap">
            <div class="counttitle">
              <span id="nextLabel">–ù–∞—Å—Ç—É–ø–Ω–∞ –≥—Ä–∞: ‚Äî</span>
              <span id="nextMeta">‚Äî</span>
            </div>
            <div class="count" aria-live="polite">
              <div class="unit">
                <div class="num" id="d">--</div>
                <div class="lbl">–¥–Ω—ñ–≤</div>
              </div>
              <div class="unit">
                <div class="num" id="h">--</div>
                <div class="lbl">–≥–æ–¥</div>
              </div>
              <div class="unit">
                <div class="num" id="m">--</div>
                <div class="lbl">—Ö–≤</div>
              </div>
              <div class="unit">
                <div class="num" id="s">--</div>
                <div class="lbl">—Å–µ–∫</div>
              </div>
            </div>
          </div>

          <div style="height: 12px"></div>

          <h3>–•—Ç–æ —Ç–∏ —Å—å–æ–≥–æ–¥–Ω—ñ? üé≠</h3>
          <div class="rolebox">
            <div class="role" id="role">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–í–∏–ø–∞–¥–∫–æ–≤–∞ —Ä–æ–ª—å‚Äù</div>
            <p class="small">
              –§–∞–Ω–æ–≤–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∏ (–Ω–µ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Ä–æ–∑–ø–æ–¥—ñ–ª —Ä–æ–ª–µ–π üòâ).
            </p>
            <button class="btn mini" id="btnRole" type="button">
              üé≤ –í–∏–ø–∞–¥–∫–æ–≤–∞ —Ä–æ–ª—å
            </button>
          </div>

          <div style="height: 14px"></div>

          <h3>–ê–ª—ñ–±—ñ —Ç–∞ —Ü–∏—Ç–∞—Ç–∞ –¥–Ω—è üñ§</h3>
          <div class="rolebox">
            <div class="role" id="alibiText">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∞–ª—ñ–±—ñ‚Äù</div>
            <button class="btn mini" id="btnAlibi" type="button">
              üßæ –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∞–ª—ñ–±—ñ
            </button>

            <div style="height: 14px"></div>

            <div class="role" id="quoteText">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–¶–∏—Ç–∞—Ç–∞ –¥–Ω—è‚Äù</div>
            <button class="btn mini" id="btnQuote" type="button">
              üñ§ –¶–∏—Ç–∞—Ç–∞ –¥–Ω—è
            </button>

            <p class="small" style="margin-top: 8px">
              –ú–æ–∂–Ω–∞ —é–∑–∞—Ç–∏ —è–∫ ‚Äú—Å–ª–æ–≤–æ –≤–µ–¥—É—á–æ–≥–æ‚Äù –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –≥—Ä–∏ üòÑ
            </p>
          </div>
        </div>
      </section>

      <section class="split section" id="club">
        <div class="card">
          <h3>–ü—Ä–æ –∫–ª—É–±</h3>
          <p class="sub">
            –ú–∏ –≥—Ä–∞—î–º–æ –≤ –∫–ª–∞—Å–∏—á–Ω—É –º–∞—Ñ—ñ—é —â–æ–ø‚Äô—è—Ç–Ω–∏—Ü—ñ –≤ –ö—ñ–ª—ñ. –ù–æ–≤–∞—á–∫–∞–º ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π
            –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å. –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ ‚Äú—è–∫ –Ω–∞ –∞—Ñ—ñ—à—ñ‚Äù: —Ç–µ–º–∏, –¥—Ä–µ—Å-–∫–æ–¥, —Ñ–æ—Ç–æ/–≤—ñ–¥–µ–æ —Ç–∞
            —Ç—É—Ä–Ω—ñ—Ä–Ω—ñ –≤–µ—á–æ—Ä–∏.
          </p>
          <div class="chips">
            <span class="chip"
              ><span class="c"></span> –õ–æ–∫–∞—Ü—ñ—è: <b>Brahmsweg 17</b></span
            >
            <span class="chip"><span class="c"></span> –ú—ñ—Å—Ç–æ: <b>Kiel</b></span>
            <span class="chip"
              ><span class="c red"></span> Telegram: <b>@kieler_mafia</b></span
            >
          </div>

          <div style="height: 10px"></div>

          <p class="sub" style="margin: 0">
            <b>–Ø–∫ –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è:</b> –Ω–∞—Ç–∏—Å–Ω–∏ ‚Äú–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è‚Äù –∞–±–æ –Ω–∞–ø–∏—à–∏ –≤ Telegram /
            Instagram. –£ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –≤–∫–∞–∂–∏:
            <i>–¥–∞—Ç–∞/—Ç–µ–º–∞, —ñ–º‚Äô—è, —Å–∫—ñ–ª—å–∫–∏ –ª—é–¥–µ–π</i>.
          </p>

          <div style="height: 12px"></div>

          <div class="ctas">
            <a
              class="btn mini"
              href="https://t.me/kieler_mafia"
              target="_blank"
              rel="noopener"
              >üì£ Telegram –∫–∞–Ω–∞–ª</a
            >
            <a
              class="btn mini"
              href="https://t.me/ksenyashvets19"
              target="_blank"
              rel="noopener"
              >üí¨ Telegram @ksenyashvets19</a
            >
            <a
              class="btn mini"
              href="https://t.me/OksanaKolivanova"
              target="_blank"
              rel="noopener"
              >üí¨ Telegram @OksanaKolivanova</a
            >
          </div>
        </div>

        <div class="card" id="rules">
          <h3>–ü—Ä–∞–≤–∏–ª–∞ / FAQ</h3>
          <p class="sub">
            –ö–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ —Ñ–æ—Ä–º–∞—Ç. –í–µ–¥—É—á–∏–π –ø–æ—è—Å–Ω–∏—Ç—å –¥–µ—Ç–∞–ª—ñ –Ω–∞ –º—ñ—Å—Ü—ñ.
          </p>
          <ul
            class="sub"
            style="margin: 0; padding-left: 18px; line-height: 1.7"
          >
            <li><b>17:30</b> ‚Äî –º—ñ–Ω—ñ-–Ω–∞–≤—á–∞–Ω–Ω—è –¥–ª—è –Ω–æ–≤–∞—á–∫—ñ–≤</li>
            <li><b>18:30</b> ‚Äî —ñ–≥—Ä–∏ (–≤–µ–¥—É—á–∏–π –∫–µ—Ä—É—î –ø—Ä–æ—Ü–µ—Å–æ–º)</li>
            <li><b>–î—Ä–µ—Å-–∫–æ–¥</b> —ñ–Ω–∫–æ–ª–∏ —Ç–µ–º–∞—Ç–∏—á–Ω–∏–π (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ Total Black)</li>
            <li><b>–í–≤—ñ—á–ª–∏–≤—ñ—Å—Ç—å</b> —ñ –ø–æ–≤–∞–≥–∞ ‚Äî must</li>
          </ul>
        </div>
      </section>

      <section class="card section" id="photos">
        <h3>–§–æ—Ç–æ / –ø–æ—Å—Ç–∏ –∑ Instagram</h3>
        <p class="sub">
          –¢—É—Ç –ø—ñ–¥—Ç—è–≥—É—é—Ç—å—Å—è –ø–æ—Å—Ç–∏ —è–∫ ‚Äú–ø–ª–∏—Ç–∫–∏‚Äù. –Ø–∫—â–æ embed –Ω–µ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è ‚Äî
          –Ω–∞—Ç–∏—Å–Ω–∏ ‚Äú–í—ñ–¥–∫—Ä–∏—Ç–∏ –ø–æ—Å—Ç‚Äù.
        </p>
        <div class="iggrid" id="iggrid"></div>
      </section>

      <section class="card section" id="hub">
        <div
          style="
            display: flex;
            justify-content: space-between;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
          "
        >
          <h3 style="margin: 0">–ö–ª—É–±–Ω–∏–π Hub</h3>
          <div style="display: flex; gap: 8px; flex-wrap: wrap">
            <a class="btn mini" href="#announcements">üìÖ –ê–Ω–æ–Ω—Å–∏</a>
            <a class="btn mini" href="#media">üé¨ –í—ñ–¥–µ–æ</a>
          </div>
        </div>

        <div class="tabs" role="tablist" aria-label="Hub tabs">
          <button class="tab" role="tab" aria-selected="true" data-tab="rank">
            –†–µ–π—Ç–∏–Ω–≥
          </button>
          <button class="tab" role="tab" aria-selected="false" data-tab="tours">
            –¢—É—Ä–Ω—ñ—Ä–∏
          </button>
          <button
            class="tab"
            role="tab"
            aria-selected="false"
            data-tab="players"
          >
            –ì—Ä–∞–≤—Ü—ñ
          </button>
          <button class="tab" role="tab" aria-selected="false" data-tab="bday">
            –î–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è
          </button>
        </div>

        <div class="panel active" id="rank" role="tabpanel">
          <p class="sub">
            –†–µ–π—Ç–∏–Ω–≥ —Ä–∞—Ö—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ —Ç—É—Ä–Ω—ñ—Ä–∞—Ö –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä–æ–∫—É.
          </p>
          <table id="rankTable"></table>
        </div>

        <div class="panel" id="tours" role="tabpanel">
          <div id="tournaments"></div>
        </div>

        <div class="panel" id="players" role="tabpanel">
          <p class="sub">
            –ö–ª—ñ–∫–Ω–∏ –Ω–∞ –≥—Ä–∞–≤—Ü—è ‚Äî –ø–æ–∫–∞–∂–µ–º–æ —É—á–∞—Å—Ç—å —É —Ç—É—Ä–Ω—ñ—Ä–∞—Ö —Ü—å–æ–≥–æ —Ä–æ–∫—É —Ç–∞ –ø—Ä–∏–∑–æ–≤—ñ.
          </p>
          <div
            style="display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 12px"
          >
            <div
              class="card"
              style="box-shadow: none; border-color: rgba(255, 255, 255, 0.1)"
            >
              <table id="playersTable"></table>
            </div>
            <div
              class="card"
              style="box-shadow: none; border-color: rgba(255, 255, 255, 0.1)"
            >
              <h3 style="margin: 0 0 8px; font-size: 15px" id="pTitle">
                –û–±–µ—Ä–∏ –≥—Ä–∞–≤—Ü—è
              </h3>
              <div class="sub" id="pBody">
                –ü–æ–∫–∞–∂–µ–º–æ —Ç—É—Ä–Ω—ñ—Ä–∏, –º—ñ—Å—Ü—è —Ç–∞ –ø—Ä–∏–∑–æ–≤—ñ –∑–∞ –ø–æ—Ç–æ—á–Ω–∏–π —Ä—ñ–∫.
              </div>
            </div>
          </div>
        </div>

        <div class="panel" id="bday" role="tabpanel">
          <p class="sub">–ù–∞–π–±–ª–∏–∂—á—ñ –¥–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è ‚Äî –∑–≤–µ—Ä—Ö—É.</p>
          <table id="bdayTable"></table>
        </div>
      </section>

      <section class="card section" id="media">
        <h3>–í—ñ–¥–µ–æ / –º–µ–¥—ñ–∞</h3>
        <p class="sub">
          YouTube –º–æ–∂–Ω–∞ –≤–±—É–¥—É–≤–∞—Ç–∏, –∞ Reels/–ø–æ—Å—Ç–∏ ‚Äî —è–∫ Instagram embed.
        </p>
        <div id="mediaList"></div>
      </section>

      <footer>
        <div>
          Telegram –∫–∞–Ω–∞–ª:
          <a href="https://t.me/kieler_mafia" target="_blank" rel="noopener"
            >@kieler_mafia</a
          >
          <span class="sep">¬∑</span>
          –ö–æ–Ω—Ç–∞–∫—Ç–∏:
          <a href="https://t.me/ksenyashvets19" target="_blank" rel="noopener"
            >@ksenyashvets19</a
          >
          <span class="sep">¬∑</span>
          <a href="https://t.me/OksanaKolivanova" target="_blank" rel="noopener"
            >@OksanaKolivanova</a
          >
          <span class="sep">¬∑</span>
          Instagram:
          <a
            href="https://instagram.com/kieler.mafia.club"
            target="_blank"
            rel="noopener"
            >@kieler.mafia.club</a
          >
        </div>
        <div style="margin-top: 6px">
          ¬© <span id="year"></span> Mafia Kiel ¬∑ made with üñ§
        </div>
      </footer>
    </div>

    <script>
      // =========================
      // EDIT: –∫–æ–Ω—Ç–∞–∫—Ç–∏ / –∑–∞–ø–∏—Å
      // =========================
      const CLUB = {
        instagram: "https://instagram.com/kieler.mafia.club",
        email: "kieler.mafia.club@gmail.com",
        location: "Brahmsweg 17, 24159 Kiel",
        telegramChannel: "https://t.me/kieler_mafia",
        telegramContacts: [
          { handle: "@ksenyashvets19", link: "https://t.me/ksenyashvets19" },
          {
            handle: "@OksanaKolivanova",
            link: "https://t.me/OksanaKolivanova",
          },
        ],
      };

      // =========================
      // EDIT: HERO featured
      // =========================
      const HERO_FEATURE = {
        title: "Reel",
        url: "https://www.instagram.com/reel/DPd1lejDEOf/",
      };

      // =========================
      // EDIT: –ê–ù–û–ù–°–ò
      // =========================
      const EVENTS = [
        {
          title: "MAFIA FRIDAY 13 ¬∑ TOTAL BLACK DRESS CODE",
          dateTime: "2026-03-13T18:30:00+01:00",
          warmup: "17:30 ¬∑ –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å",
          game: "18:30 ¬∑ —ñ–≥—Ä–∏",
          price: "–ü–µ—Ä—à–∏–π –≤–µ—á—ñ—Ä ‚Äî –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ",
          place: CLUB.location,
          dress: "Total Black",
          tags: ["dresscode", "special"],
        },
        {
          title: "Friday Mafia Night",
          dateTime: "2026-03-20T18:30:00+01:00",
          warmup: "17:30 ¬∑ –¥–ª—è –Ω–æ–≤–∞—á–∫—ñ–≤",
          game: "18:30 ¬∑ —ñ–≥—Ä–∏",
          price: "–£—Ç–æ—á–Ω—é–π —É DM / Telegram",
          place: CLUB.location,
          dress: "Free style",
          tags: ["regular"],
        },
      ];

      // =========================
      // EDIT: Instagram posts (–ø–ª–∏—Ç–∫–∏)
      // =========================
      const IG_POSTS = [
        { title: "–†–µ–ø–æ—Ä—Ç", url: "https://www.instagram.com/p/DUyP-TADaGV/" },
        { title: "Reel", url: "https://www.instagram.com/reel/DPd1lejDEOf/" },
      ];

      // =========================
      // EDIT: HUB data + media
      // =========================
      const DATA = {
        tournaments: [
          {
            name: "Spring Tournament #1",
            date: "2026-03-20",
            link: "",
            participants: [
              { nick: "foxxy", place: 1, prize: 50 },
              { nick: "an.krsh", place: 2, prize: 30 },
              { nick: "yalemonchik", place: 3, prize: 20 },
            ],
          },
        ],
        players: [
          { nick: "foxxy", birthday: "2000-05-12" },
          { nick: "an.krsh", birthday: "1998-10-02" },
          { nick: "yalemonchik", birthday: "1997-02-14" },
        ],
        media: [
          {
            type: "instagram",
            title: "Reel (–∫–ª—É–±)",
            url: "https://www.instagram.com/reel/DPd1lejDEOf/",
          },
          {
            type: "instagram",
            title: "–ü–æ—Å—Ç (—Ä–µ–ø–æ—Ä—Ç)",
            url: "https://www.instagram.com/p/DUyP-TADaGV/",
          },
          {
            type: "youtube",
            title: "Best moments (–ø—Ä–∏–∫–ª–∞–¥)",
            url: "https://www.youtube.com/watch?v=dQw4w9WgXcQ",
          },
        ],
      };

      // =========================
      // Helpers
      // =========================
      const $ = (id) => document.getElementById(id);

      function fmtDateTime(iso) {
        const d = new Date(iso);
        return d.toLocaleString(undefined, {
          weekday: "short",
          year: "numeric",
          month: "short",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
        });
      }
      function fmtDate(ymd) {
        const d = new Date(ymd + "T12:00:00");
        return d.toLocaleDateString(undefined, {
          year: "numeric",
          month: "short",
          day: "2-digit",
        });
      }

      function normalizeIG(url) {
        try {
          const u = new URL(url);
          const parts = u.pathname.split("/").filter(Boolean);
          const types = ["p", "reel", "tv"];
          for (const t of types) {
            const idx = parts.indexOf(t);
            if (idx >= 0 && parts[idx + 1]) {
              const code = parts[idx + 1];
              return {
                type: t,
                code,
                permalink: `https://www.instagram.com/${t}/${code}/`,
              };
            }
          }
        } catch (e) {}
        return { type: "", code: "", permalink: url };
      }

      function buildICS(ev) {
        const start = new Date(ev.dateTime);
        const end = new Date(start.getTime() + 3 * 60 * 60 * 1000);
        const pad = (n) => String(n).padStart(2, "0");
        const toICS = (d) => {
          const u = new Date(d.getTime() - d.getTimezoneOffset() * 60000);
          return `${u.getUTCFullYear()}${pad(u.getUTCMonth() + 1)}${pad(u.getUTCDate())}T${pad(u.getUTCHours())}${pad(u.getUTCMinutes())}${pad(u.getUTCSeconds())}Z`;
        };
        const uid = `mafia-kiel-${start.getTime()}@mafiakiel`;
        const title = ev.title.replace(/[,;]/g, " ");
        const loc = (ev.place || "").replace(/[,;]/g, " ");
        const desc = [
          ev.warmup || "",
          ev.game || "",
          ev.price ? `–¶—ñ–Ω–∞: ${ev.price}` : "",
          ev.dress ? `Dress code: ${ev.dress}` : "",
          "–ó–∞–ø–∏—Å: Telegram/DM/Email",
        ]
          .filter(Boolean)
          .join("\\n");
        const ics = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Mafia Kiel//Events//UA
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${uid}
DTSTAMP:${toICS(new Date())}
DTSTART:${toICS(start)}
DTEND:${toICS(end)}
SUMMARY:${title}
LOCATION:${loc}
DESCRIPTION:${desc}
END:VEVENT
END:VCALENDAR`;
        return "data:text/calendar;charset=utf-8," + encodeURIComponent(ics);
      }

      // =========================
      // Hero embed (official IG)
      // =========================
      (function renderHeroEmbed() {
        const n = normalizeIG(HERO_FEATURE.url);
        $("heroTag").textContent = (
          n.type ||
          HERO_FEATURE.title ||
          "IG"
        ).toUpperCase();
        const wrap = $("heroEmbedWrap");
        wrap.innerHTML = `
        <blockquote class="instagram-media"
          data-instgrm-permalink="${n.permalink}"
          data-instgrm-version="14"
          style="background:#000; border:0; margin:0; width:100%; border-radius:18px; overflow:hidden;">
        </blockquote>
        <div style="height:10px"></div>
        <a class="btn mini" href="${n.permalink}" target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ ‚Üó</a>
      `;
      })();

      // =========================
      // Signup (Telegram-first)
      // =========================
      function signup() {
        const subject = encodeURIComponent("–ó–∞–ø–∏—Å –Ω–∞ –º–∞—Ñ—ñ—é ¬∑ Mafia Kiel");
        const body = encodeURIComponent(
          "–ü—Ä–∏–≤—ñ—Ç! –•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –º–∞—Ñ—ñ—é.\n" +
            "–î–∞—Ç–∞/—Ç–µ–º–∞: ____\n–Ü–º‚Äô—è: ____\n–°–∫—ñ–ª—å–∫–∏ –ª—é–¥–µ–π: ____\n\n" +
            "–õ–æ–∫–∞—Ü—ñ—è: " +
            CLUB.location +
            "\nInstagram: " +
            CLUB.instagram +
            "\nTelegram: " +
            CLUB.telegramChannel,
        );
        const mailto = `mailto:${CLUB.email}?subject=${subject}&body=${body}`;

        const msg = `–Ø–∫ –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è?
1) Telegram –∫–∞–Ω–∞–ª (–∞–Ω–æ–Ω—Å–∏): ${CLUB.telegramChannel}
2) Telegram –∫–æ–Ω—Ç–∞–∫—Ç–∏:
- ${CLUB.telegramContacts[0].handle}
- ${CLUB.telegramContacts[1].handle}
3) Instagram DM: ${CLUB.instagram}
4) Email: ${CLUB.email}

–ù–∞—Ç–∏—Å–Ω–∏ OK ‚Äî –≤—ñ–¥–∫—Ä–∏—é Email (—è–∫ –∑–∞–ø–∞—Å–Ω–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç).`;
        if (confirm(msg)) window.location.href = mailto;
      }
      $("btnSignup").addEventListener("click", (e) => {
        e.preventDefault();
        signup();
      });

      // =========================
      // Render events + countdown
      // =========================
      const $events = $("events");

      function renderEvents() {
        $events.innerHTML = "";
        const sorted = [...EVENTS].sort(
          (a, b) => new Date(a.dateTime) - new Date(b.dateTime),
        );
        sorted.forEach((ev) => {
          const badge = ev.tags?.includes("dresscode")
            ? `<span class="badge red">DRESS CODE</span>`
            : `<span class="badge">FRIDAY</span>`;
          const dress =
            ev.dress && ev.dress.toLowerCase().includes("black")
              ? `<span class="badge red">TOTAL BLACK</span>`
              : ev.dress
                ? `<span class="badge">${ev.dress}</span>`
                : "";
          const icsHref = buildICS(ev);

          const el = document.createElement("div");
          el.className = "event";
          el.innerHTML = `
          <div>
            <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center">${badge} ${dress}</div>
            <div style="margin-top:8px">
              <strong>${ev.title}</strong>
              <div class="meta">
                <div>üóìÔ∏è ${fmtDateTime(ev.dateTime)}</div>
                <div>üïò ${ev.warmup || ""}${ev.game ? " ¬∑ " + ev.game : ""}</div>
                <div>üìç ${ev.place || "Kiel"}</div>
                ${ev.price ? `<div>üí∂ ${ev.price}</div>` : ""}
              </div>
            </div>
          </div>
          <div class="actions">
            <button class="btn mini primary" data-signup="1">üïµÔ∏è –ó–∞–ø–∏—Å–∞—Ç–∏—Å—è</button>
            <a class="btn mini" href="${icsHref}" download="mafia-kiel.ics">‚ûï Add to Calendar</a>
          </div>
        `;
          $events.appendChild(el);
        });
        setNext(sorted);
      }

      function setNext(sorted) {
        const now = new Date();
        const next =
          sorted.find((ev) => new Date(ev.dateTime) > now) || sorted[0];
        window.__NEXT = next;
        $("nextLabel").textContent = next
          ? `–ù–∞—Å—Ç—É–ø–Ω–∞ –≥—Ä–∞: ${next.title}`
          : "–ù–∞—Å—Ç—É–ø–Ω–∞ –≥—Ä–∞: ‚Äî";
        $("nextMeta").textContent = next ? fmtDateTime(next.dateTime) : "‚Äî";
      }

      function tick() {
        const next = window.__NEXT;
        if (!next) return;
        const now = new Date().getTime();
        const target = new Date(next.dateTime).getTime();
        let diff = Math.max(0, target - now);

        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        diff -= d * (1000 * 60 * 60 * 24);
        const h = Math.floor(diff / (1000 * 60 * 60));
        diff -= h * (1000 * 60 * 60);
        const m = Math.floor(diff / (1000 * 60));
        diff -= m * (1000 * 60);
        const s = Math.floor(diff / 1000);

        $("d").textContent = String(d).padStart(2, "0");
        $("h").textContent = String(h).padStart(2, "0");
        $("m").textContent = String(m).padStart(2, "0");
        $("s").textContent = String(s).padStart(2, "0");
      }

      document.addEventListener("click", (e) => {
        const btn = e.target.closest("[data-signup]");
        if (btn) {
          e.preventDefault();
          signup();
        }
      });

      // =========================
      // Role randomizer
      // =========================
      const ROLES = [
        { name: "–ú–∏—Ä–Ω–∏–π –º–µ—à–∫–∞–Ω–µ—Ü—å", hint: "–°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π, –∞–Ω–∞–ª—ñ–∑—É–π, –≥–æ–ª–æ—Å—É–π." },
        { name: "–ú–∞—Ñ—ñ—è", hint: "–¢—Ä–∏–º–∞–π –ª—ñ–Ω—ñ—é, –Ω–µ –ø–∞–ª–∏—Å—å üòÑ" },
        { name: "–®–µ—Ä–∏—Ñ", hint: "–°—Ç–∞–≤ –ø–∏—Ç–∞–Ω–Ω—è —ñ —à—É–∫–∞–π –ø—Ä–∞–≤–¥—É." },
        { name: "–î–æ–Ω", hint: "–ö–µ—Ä—É—î—à –≥—Ä–æ—é ‚Äî –∞–ª–µ —Ç–∏—Ö–æ." },
        { name: "–î–æ–∫—Ç–æ—Ä", hint: "–†—è—Ç—É–π –º—ñ—Å—Ç–æ (—è–∫—â–æ —Ä–æ–ª—å —É —Ñ–æ—Ä–º–∞—Ç—ñ)." },
      ];
      $("btnRole").addEventListener("click", () => {
        const r = ROLES[Math.floor(Math.random() * ROLES.length)];
        $("role").textContent = `${r.name} ‚Äî ${r.hint}`;
      });

      // =========================
      // Alibi + Quote
      // =========================
      const ALIBIS = [
        "–Ø –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–π—à–æ–≤(–ª–∞) –∑–∞ –∫–∞–≤–æ—é‚Ä¶ —ñ –≤–∏–ø–∞–¥–∫–æ–≤–æ –æ–ø–∏–Ω–∏–≤—Å—è(–ª–∞—Å—å) —Ç—É—Ç ‚òï",
        "–Ø –º–æ–≤—á–∞–≤(–ª–∞), –±–æ –∞–Ω–∞–ª—ñ–∑—É–≤–∞–≤(–ª–∞), –∞ –Ω–µ —Ç–æ–º—É —â–æ —è –º–∞—Ñ—ñ—è.",
        "–ú–µ–Ω–µ –ø—ñ–¥—Å—Ç–∞–≤–∏–ª–∏. –Ø –∑–∞–Ω–∞–¥—Ç–æ –∫—Ä–∞—Å–∏–≤–∏–π(–∞), —â–æ–± –±—É—Ç–∏ –º–∞—Ñ—ñ—î—é üòé",
        "–Ø –≥–æ–ª–æ—Å—É–≤–∞–≤(–ª–∞) –ª–æ–≥—ñ—á–Ω–æ. –Ø–∫—â–æ —Ü–µ –∑–ª–æ—á–∏–Ω ‚Äî –∞—Ä–µ—à—Ç–æ–≤—É–π—Ç–µ.",
        "–Ø –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–≤(–ª–∞). –ú—ñ—Å—Ç–æ –ø–æ—Ç—Ä–µ–±—É—î –º—ñ–∑–∫—ñ–≤, –Ω–µ –∫—Ä–∏–∫—ñ–≤.",
        "–Ø –Ω–µ –ø—ñ–¥–æ–∑—Ä—ñ–ª–∏–π(–∞). –Ø –ø—Ä–æ—Å—Ç–æ —ñ–Ω—Ç—Ä–æ–≤–µ—Ä—Ç(–∫–∞) ü´†",
        "–Ø –Ω–µ –∑–ª–∏–≤–∞–≤(–ª–∞) –Ω—ñ–∫–æ–≥–æ. –Ø —Ä—è—Ç—É–≤–∞–≤(–ª–∞) –º—ñ—Å—Ç–æ‚Ä¶ –ø–æ-—Å–≤–æ—î–º—É.",
        "–Ø –¥–∏–≤–∏–≤—Å—è(–ª–∞—Å—å) –Ω–∞ —Ä–µ–∞–∫—Ü—ñ—ó. –Ü –∑–∞—Ä–∞–∑ –±–∞—á—É, —Ö—Ç–æ –≥—Ä–∞—î —Ä–æ–ª—å.",
        "–£ –º–µ–Ω–µ –∞–ª—ñ–±—ñ –∑–∞–ª—ñ–∑–Ω–µ: —è –Ω–∞–≤—ñ—Ç—å –ø—Ä–∞–≤–∏–ª –Ω–µ –¥–æ—á–µ–∫–∞–≤—Å—è(–ª–∞—Å—å) ‚Äî –≤–∂–µ –∑—Ä–æ–∑—É–º—ñ–≤(–ª–∞) —Ö—Ç–æ –º–∞—Ñ—ñ—è.",
        "–Ø –±—É–≤(–ª–∞) –º–∞—Ñ—ñ—î—é —Ç—ñ–ª—å–∫–∏ –≤ –¥—É—à—ñ. –ù–∞ —Å—Ç–æ–ª—ñ ‚Äî –Ω—ñ üòá",
      ];

      const QUOTES = [
        "–ú—ñ—Å—Ç–æ –∑–∞—Å–∏–Ω–∞—î‚Ä¶ –∞–ª–µ –ø—Ä–∞–≤–¥–∞ –Ω–µ —Å–ø–∏—Ç—å.",
        "–¢–∏—à–∞ ‚Äî –Ω–∞–π–∫—Ä–∞—â–∏–π –∫–æ—Å—Ç—é–º –º–∞—Ñ—ñ—ó.",
        "–ù–µ —Ç–æ–π –≤–∏–Ω–µ–Ω, —Ö—Ç–æ –ø—ñ–¥–æ–∑—Ä—ñ–ª–∏–π. –ê —Ç–æ–π, —Ö—Ç–æ –Ω–∞–¥—Ç–æ –ø–µ—Ä–µ–∫–æ–Ω–ª–∏–≤–∏–π.",
        "–°–ª–æ–≤–∞ ‚Äî —Ü–µ –¥–∏–º. –§–∞–∫—Ç–∏ ‚Äî —Ü–µ –≤–æ–≥–æ–Ω—å.",
        "–Ø–∫—â–æ —Ç–∏ –≤—Å—ñ–º –ø–æ–¥–æ–±–∞—î—à—Å—è ‚Äî —Ç–∏ –∞–±–æ –≥–µ–Ω—ñ–π, –∞–±–æ –º–∞—Ñ—ñ—è.",
        "–°—å–æ–≥–æ–¥–Ω—ñ –º–∏ –≥—Ä–∞—î–º–æ –≤ –º–∞—Ñ—ñ—é. –ó–∞–≤—Ç—Ä–∞ ‚Äî –≤–æ–Ω–∞ –≥—Ä–∞—î –Ω–∞–º–∏.",
        "–î–æ–≤—ñ—Ä–∞ ‚Äî –≤–∞–ª—é—Ç–∞. –ë—Ä–µ—Ö–Ω—è ‚Äî –≤—ñ–¥—Å–æ—Ç–∫–∏.",
        "–ü–æ–≥–∞–Ω–∏–π —Ö—ñ–¥ ‚Äî —Ç–µ–∂ —Ö—ñ–¥. –ì—ñ—Ä—à–µ ‚Äî –Ω–µ –∑—Ä–æ–±–∏—Ç–∏ –∂–æ–¥–Ω–æ–≥–æ.",
        "–ü–µ—Ä–µ–º–æ–≥–∞ –ª—é–±–∏—Ç—å —Å–ø–æ–∫—ñ–π. –ú–∞—Ñ—ñ—è ‚Äî —Ö–∞–æ—Å.",
        "–ó–∞–≤–∂–¥–∏ —Å–ª—É—Ö–∞–π –º—ñ—Å—Ç–æ. –û—Å–æ–±–ª–∏–≤–æ –∫–æ–ª–∏ –≤–æ–Ω–æ –º–æ–≤—á–∏—Ç—å.",
      ];

      function pick(arr) {
        return arr[Math.floor(Math.random() * arr.length)];
      }

      $("btnAlibi").addEventListener("click", () => {
        $("alibiText").textContent = pick(ALIBIS);
      });

      $("btnQuote").addEventListener("click", () => {
        $("quoteText").textContent = "‚Äú" + pick(QUOTES) + "‚Äù";
      });

      // =========================
      // Instagram tiles (blockquote embeds)
      // =========================
      const grid = $("iggrid");
      grid.innerHTML = IG_POSTS.map((p, i) => {
        const n = normalizeIG(p.url);
        const title = p.title || "Instagram";
        const label = n.code ? `#${n.code}` : `Post ${i + 1}`;
        return `
        <div class="igcard">
          <div class="top">
            <b>${title}</b>
            <span>${label}</span>
          </div>
          <div class="body">
            <blockquote class="instagram-media"
              data-instgrm-permalink="${n.permalink}"
              data-instgrm-version="14"
              style="background:#000; border:0; margin:0; width:100%; border-radius:12px; overflow:hidden;">
            </blockquote>
            <div style="height:10px"></div>
            <a class="btn mini" href="${n.permalink}" target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ ‚Üó</a>
          </div>
        </div>
      `;
      }).join("");

      // =========================
      // Hub tabs
      // =========================
      const tabs = Array.from(document.querySelectorAll(".tab"));
      const panels = Array.from(document.querySelectorAll(".panel"));
      tabs.forEach((t) => {
        t.addEventListener("click", () => {
          tabs.forEach((x) => x.setAttribute("aria-selected", "false"));
          t.setAttribute("aria-selected", "true");
          const id = t.dataset.tab;
          panels.forEach((p) => p.classList.toggle("active", p.id === id));
        });
      });

      // =========================
      // Ranking from tournaments current year
      // =========================
      const now = new Date();
      const currentYear = now.getFullYear();
      const scoreByPlace = (p) =>
        p === 1 ? 10 : p === 2 ? 7 : p === 3 ? 5 : 2;
      const stats = new Map();
      function addStat(nick, updater) {
        if (!stats.has(nick))
          stats.set(nick, {
            nick,
            points: 0,
            wins: 0,
            prize: 0,
            played: 0,
            tours: [],
          });
        updater(stats.get(nick));
      }
      DATA.tournaments.forEach((t) => {
        const year = new Date(t.date + "T12:00:00").getFullYear();
        if (year !== currentYear) return;
        (t.participants || []).forEach((p) => {
          addStat(p.nick, (s) => {
            s.played += 1;
            s.points += scoreByPlace(p.place);
            s.prize += Number(p.prize || 0);
            if (p.place === 1) s.wins += 1;
            s.tours.push({
              tournament: t.name,
              date: t.date,
              place: p.place,
              prize: p.prize || 0,
            });
          });
        });
      });
      const rankArr = Array.from(stats.values()).sort(
        (a, b) => b.points - a.points || b.prize - a.prize || b.wins - a.wins,
      );
      $("rankTable").innerHTML = `
      <thead><tr><th>#</th><th>–ù—ñ–∫</th><th>–û—á–∫–∏</th><th>–ü–µ—Ä–µ–º–æ–≥–∏</th><th>–¢—É—Ä–Ω—ñ—Ä—ñ–≤</th><th>–ü—Ä–∏–∑–æ–≤—ñ</th></tr></thead>
      <tbody>
        ${
          rankArr.length
            ? rankArr
                .map(
                  (r, i) => `
          <tr><td>${i + 1}</td><td><b>${r.nick}</b></td><td>${r.points}</td><td>${r.wins}</td><td>${r.played}</td><td>${r.prize}‚Ç¨</td></tr>
        `,
                )
                .join("")
            : `<tr><td colspan="6" style="color:var(--muted)">–ù–µ–º–∞—î —Ç—É—Ä–Ω—ñ—Ä—ñ–≤ —É ${currentYear} –∞–±–æ –¥–∞–Ω—ñ –Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ.</td></tr>`
        }
      </tbody>
    `;

      const toursSorted = [...DATA.tournaments].sort(
        (a, b) => new Date(b.date) - new Date(a.date),
      );
      $("tournaments").innerHTML = toursSorted
        .map((t) => {
          const parts = (t.participants || []).sort(
            (a, b) => (a.place || 999) - (b.place || 999),
          );
          return `
        <div class="card" style="box-shadow:none;border-color:rgba(255,255,255,.10);margin-top:10px">
          <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center">
            <div>
              <div style="font-family:var(--mono);font-size:12px;letter-spacing:.10em;text-transform:uppercase;color:rgba(255,255,255,.70)">${fmtDate(t.date)}</div>
              <div style="margin-top:6px;font-size:15px"><b>${t.name}</b></div>
              <div class="sub">${t.link ? `–ó–≤—ñ—Ç: <a href="${t.link}" target="_blank" rel="noopener" style="color:rgba(255,255,255,.78)">–ø–æ—Å–∏–ª–∞–Ω–Ω—è</a>` : ""}</div>
            </div>
            <span class="pill2"><span class="dot"></span> –£—á–∞—Å–Ω–∏–∫—ñ–≤: ${parts.length}</span>
          </div>
          <table>
            <thead><tr><th>–ú—ñ—Å—Ü–µ</th><th>–ù—ñ–∫</th><th>–ü—Ä–∏–∑</th></tr></thead>
            <tbody>
              ${
                parts.length
                  ? parts
                      .map(
                        (p) => `
                <tr><td>${p.place || ""}</td><td><b>${p.nick}</b></td><td>${p.prize ? p.prize + "‚Ç¨" : "‚Äî"}</td></tr>
              `,
                      )
                      .join("")
                  : `<tr><td colspan="3" style="color:var(--muted)">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –ø–æ —É—á–∞—Å–Ω–∏–∫–∞—Ö.</td></tr>`
              }
            </tbody>
          </table>
        </div>
      `;
        })
        .join("");

      const players = [...DATA.players].sort((a, b) =>
        a.nick.localeCompare(b.nick),
      );
      $("playersTable").innerHTML = `
      <thead><tr><th>–ù—ñ–∫</th><th>–¢—É—Ä–Ω—ñ—Ä–∏ ${currentYear}</th><th>–ü—Ä–∏–∑–æ–≤—ñ</th></tr></thead>
      <tbody>
        ${players
          .map((p) => {
            const st = stats.get(p.nick);
            const played = st?.played || 0;
            const prize = st?.prize || 0;
            return `<tr data-nick="${p.nick}" style="cursor:pointer">
            <td><b>${p.nick}</b></td><td>${played}</td><td>${prize}‚Ç¨</td>
          </tr>`;
          })
          .join("")}
      </tbody>
    `;
      $("playersTable").addEventListener("click", (e) => {
        const tr = e.target.closest("tr[data-nick]");
        if (!tr) return;
        const nick = tr.dataset.nick;
        const st = stats.get(nick);
        $("pTitle").textContent = `@${nick}`;
        if (!st) {
          $("pBody").innerHTML =
            `<div class="sub">–£ ${currentYear} –ø–æ–∫–∏ –Ω–µ–º–∞—î —Ç—É—Ä–Ω—ñ—Ä—ñ–≤/—É—á–∞—Å—Ç—ñ –¥–ª—è —Ü—å–æ–≥–æ –≥—Ä–∞–≤—Ü—è.</div>`;
          return;
        }
        const list = st.tours
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .map(
            (x) =>
              `<li>${fmtDate(x.date)} ¬∑ <b>${x.tournament}</b> ‚Äî –º—ñ—Å—Ü–µ: ${x.place || "‚Äî"}, –ø—Ä–∏–∑: ${x.prize || 0}‚Ç¨</li>`,
          )
          .join("");
        $("pBody").innerHTML = `
        <div class="sub">–û—á–∫–∏: <b>${st.points}</b> ¬∑ –ü–µ—Ä–µ–º–æ–≥–∏: <b>${st.wins}</b> ¬∑ –¢—É—Ä–Ω—ñ—Ä—ñ–≤: <b>${st.played}</b> ¬∑ –ü—Ä–∏–∑–æ–≤—ñ: <b>${st.prize}‚Ç¨</b></div>
        <div style="height:10px"></div>
        <ul class="sub" style="margin:0;padding-left:18px;line-height:1.7">${list}</ul>
      `;
      });

      function nextBirthday(bday) {
        const d0 = new Date(bday + "T12:00:00");
        const now = new Date();
        const d = new Date(
          now.getFullYear(),
          d0.getMonth(),
          d0.getDate(),
          12,
          0,
          0,
        );
        if (d < now) d.setFullYear(now.getFullYear() + 1);
        return d;
      }
      const bdays = DATA.players
        .filter((p) => p.birthday)
        .map((p) => ({
          nick: p.nick,
          birthday: p.birthday,
          next: nextBirthday(p.birthday),
        }))
        .sort((a, b) => a.next - b.next);
      $("bdayTable").innerHTML = `
      <thead><tr><th>–ù—ñ–∫</th><th>–î–ù</th><th>–ù–∞–π–±–ª–∏–∂—á–∏–π</th></tr></thead>
      <tbody>
        ${
          bdays.length
            ? bdays
                .map(
                  (x) => `
          <tr><td><b>${x.nick}</b></td><td>${fmtDate(x.birthday)}</td><td>${x.next.toLocaleDateString(undefined, { month: "short", day: "2-digit" })}</td></tr>
        `,
                )
                .join("")
            : `<tr><td colspan="3" style="color:var(--muted)">–î–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è –Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ.</td></tr>`
        }
      </tbody>
    `;

      function ytEmbed(url) {
        const u = new URL(url);
        const id = u.searchParams.get("v") || u.pathname.split("/").pop();
        return `https://www.youtube.com/embed/${id}`;
      }

      $("mediaList").innerHTML = DATA.media
        .map((m) => {
          if (m.type === "youtube") {
            return `
          <div class="card" style="box-shadow:none;border-color:rgba(255,255,255,.10);margin-top:10px">
            <div style="font-size:14px"><b>${m.title}</b></div>
            <div style="height:10px"></div>
            <iframe class="yt" src="${ytEmbed(m.url)}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
        `;
          }
          if (m.type === "instagram") {
            const n = normalizeIG(m.url);
            return `
          <div class="igcard" style="margin-top:10px">
            <div class="top">
              <b>${m.title}</b>
              <span>${n.type ? n.type.toUpperCase() : "IG"}</span>
            </div>
            <div class="body">
              <blockquote class="instagram-media"
                data-instgrm-permalink="${n.permalink}"
                data-instgrm-version="14"
                style="background:#000; border:0; margin:0; width:100%; border-radius:12px; overflow:hidden;">
              </blockquote>
              <div style="height:10px"></div>
              <a class="btn mini" href="${n.permalink}" target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ ‚Üó</a>
            </div>
          </div>
        `;
          }
          return `
        <div class="card" style="box-shadow:none;border-color:rgba(255,255,255,.10);margin-top:10px">
          <div style="font-size:14px"><b>${m.title}</b></div>
          <div class="sub"><a href="${m.url}" target="_blank" rel="noopener" style="color:rgba(255,255,255,.78)">${m.url}</a></div>
        </div>
      `;
        })
        .join("");

      // Init
      $("year").textContent = new Date().getFullYear();
      renderEvents();
      tick();
      setInterval(tick, 1000);
    </script>

    <!-- IMPORTANT: Instagram official embed script -->
    <script async src="https://www.instagram.com/embed.js"></script>
    <script>
      // Ask Instagram to process embeds after DOM is ready
      window.addEventListener("load", () => {
        if (window.instgrm && window.instgrm.Embeds) {
          window.instgrm.Embeds.process();
        }
      });
    </script>
  </body>
</html>
<!-- –¢–µ–º–Ω–∏–π –±–ª–æ–∫ –ª–æ–∫–∏—Ü—ñ—ó -->
<div class="mafia-noir-card">
  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
  <div class="noir-header">
    <span class="noir-highlight">–¢–∏—à–∞.</span>
    <h2>–ú–Ü–°–¢–û –ó–ê–°–ò–ù–ê–Ñ.</h2>
    <h3>–ê–õ–ï –ú–ê–§–Ü–Ø –ü–†–û–ö–ò–î–ê–Ñ–¢–¨–°–Ø</h3>
  </div>

  <!-- –ê–¥—Ä–µ—Å–∞ -->
  <div class="noir-address">
    <p>–¢–≤–æ—è —Ç–æ—á–∫–∞ –Ω–∞ –∫–∞—Ä—Ç—ñ:</p>
    <strong>Brahmsweg 17, 24159 Kiel</strong>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç–∏ -->
  <div class="noir-map-container">
    <iframe
      width="100%"
      height="300"
      frameborder="0"
      style="border: 0"
      allowfullscreen=""
      loading="lazy"
      src="https://maps.google.com/maps?q=Brahmsweg+17,+24159+Kiel&t=&z=15&ie=UTF8&iwloc=&output=embed"
    >
    </iframe>
    <!--–¢–µ–º–Ω–∏–π —à–∞—Ä –ø–æ–≤–µ—Ä—Ö –∫–∞—Ä—Ç–∏ –¥–ª—è —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—ó -->
    <div class="noir-overlay"></div>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ -->
  <div class="noir-action">
    <a
      href="https://maps.google.com/?q=Brahmsweg+17+Kiel"
      target="_blank"
      class="noir-btn"
    >
      –ü–û–ú–Ü–ß–ï–ù–û –ù–ê –ö–ê–†–¢–Ü
    </a>
  </div>
</div>
