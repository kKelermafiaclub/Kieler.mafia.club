<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ú–∞—Ñ—ñ—è –ö–∏–ª—å ¬∑ Mafia Kiel</title>
  <meta name="description" content="–ö–ª–∞—Å–∏—á–Ω–∞ –º–∞—Ñ—ñ—è —â–æ–ø‚Äô—è—Ç–Ω–∏—Ü—ñ –≤ –ö—ñ–ª—ñ. –ê–Ω–æ–Ω—Å–∏, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è, –ø—Ä–∞–≤–∏–ª–∞, —Ç—É—Ä–Ω—ñ—Ä–∏, —Ä–µ–π—Ç–∏–Ω–≥, —Ñ–æ—Ç–æ/–≤—ñ–¥–µ–æ." />
  <meta name="theme-color" content="#07080b" />

  <style>
    :root{
      --bg:#06070a;
      --bg2:#0b0f18;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.09);
      --line:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --gold:#d8b25a;
      --gold2:#f2d68a;
      --red:#ff3b3b;
      --r:18px;
      --shadow:0 18px 60px rgba(0,0,0,.55);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue", sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text); font-family:var(--sans);
      background:
        radial-gradient(1200px 700px at 18% 0%, rgba(216,178,90,.13), transparent 60%),
        radial-gradient(1000px 700px at 92% 25%, rgba(255,59,59,.10), transparent 55%),
        radial-gradient(900px 600px at 40% 105%, rgba(216,178,90,.10), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
    }

    .grain{
      pointer-events:none; position:fixed; inset:0; opacity:.13; mix-blend-mode:overlay;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
      background-size:220px 220px;
    }

    .wrap{max-width:1180px; margin:0 auto; padding:22px 14px 70px;}

    /* top */
    .topbar{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:8px 0 14px; flex-wrap:wrap;
    }
    .brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:inherit;}
    .logo{
      width:46px; height:46px; border-radius:16px;
      background:
        radial-gradient(circle at 30% 30%, rgba(242,214,138,.34), transparent 55%),
        linear-gradient(135deg, rgba(216,178,90,.24), rgba(255,255,255,.06));
      border:1px solid rgba(216,178,90,.32);
      box-shadow:0 10px 30px rgba(0,0,0,.35);
      display:grid; place-items:center;
      font-weight:900; letter-spacing:.10em;
      color:var(--gold2);
      font-family:var(--mono);
    }
    .brand h1{margin:0; font-size:15.5px; letter-spacing:.02em}
    .brand p{margin:2px 0 0; font-size:12.5px; color:var(--muted)}

    .pillrow{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .pill{
      font-size:12px; padding:8px 10px; border-radius:999px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:var(--muted);
      display:inline-flex; gap:8px; align-items:center;
    }
    .dot{width:7px;height:7px;border-radius:999px;background:var(--gold); box-shadow:0 0 14px rgba(216,178,90,.35)}
    .dot.red{background:var(--red); box-shadow:0 0 14px rgba(255,59,59,.35)}

    /* HERO like poster */
    .hero{
      border-radius:calc(var(--r) + 10px);
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.12);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
      padding:22px;
      isolation:isolate;
    }
    .hero:before{
      content:""; position:absolute; inset:-2px;
      background:
        radial-gradient(520px 260px at 18% 30%, rgba(216,178,90,.22), transparent 70%),
        radial-gradient(740px 360px at 82% 45%, rgba(255,59,59,.18), transparent 70%);
      filter:blur(7px);
      opacity:.95;
      pointer-events:none;
      z-index:-1;
    }

    .laser{
      position:absolute; top:-40px; right:-30px;
      width:340px; height:520px;
      background:
        linear-gradient(90deg, rgba(255,59,59,0), rgba(255,59,59,.35), rgba(255,59,59,0)),
        repeating-linear-gradient(
          0deg,
          rgba(255,59,59,.0) 0px,
          rgba(255,59,59,.0) 10px,
          rgba(255,59,59,.28) 12px,
          rgba(255,59,59,.0) 22px
        );
      opacity:.85;
      transform:rotate(8deg);
      mask-image:radial-gradient(circle at 30% 50%, rgba(0,0,0,1), rgba(0,0,0,0) 70%);
      pointer-events:none;
      z-index:0;
    }
    .spark{
      position:absolute; right:72px; top:128px;
      width:120px; height:120px; border-radius:999px;
      background:
        radial-gradient(circle at 50% 50%, rgba(255,255,255,.9), rgba(255,255,255,0) 55%),
        radial-gradient(circle at 55% 55%, rgba(255,59,59,.45), rgba(255,59,59,0) 60%);
      opacity:.85;
      pointer-events:none;
      z-index:1;
    }

    /* NEW: hero grid with "phone poster" */
    .heroGrid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:16px;
      align-items:stretch;
    }
    @media (max-width: 980px){
      .heroGrid{grid-template-columns:1fr}
    }
    .heroLeft{position:relative; z-index:2}
    .heroRight{
      position:relative; z-index:2;
      display:flex; align-items:center; justify-content:flex-end;
    }
    @media (max-width:980px){
      .heroRight{justify-content:flex-start}
    }

    .phone{
      width:min(360px, 100%);
      border-radius:26px;
      background:rgba(0,0,0,.28);
      border:1px solid rgba(255,255,255,.12);
      box-shadow:0 18px 60px rgba(0,0,0,.55);
      overflow:hidden;
      position:relative;
    }
    .phone:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(180px 160px at 20% 10%, rgba(216,178,90,.22), transparent 70%),
        radial-gradient(220px 200px at 80% 30%, rgba(255,59,59,.18), transparent 70%);
      filter:blur(10px);
      opacity:.9;
      pointer-events:none;
    }
    .phoneTop{
      position:relative;
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 12px;
      border-bottom:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.22);
      z-index:2;
    }
    .phoneTop b{font-size:12.5px; color:rgba(255,255,255,.88)}
    .phoneTop span{font-size:12px; color:var(--muted); font-family:var(--mono); letter-spacing:.08em}
    .phoneBody{position:relative; padding:12px; z-index:2}
    .igHeroEmbed{
      width:100%;
      border:0;
      border-radius:18px;
      background:#000;
      min-height:560px;
    }
    @media (max-width: 980px){
      .igHeroEmbed{min-height:520px}
    }
    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      font-family:var(--mono);
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      color:rgba(255,255,255,.78);
    }
    .kicker .mark{width:34px; height:1px; background:rgba(216,178,90,.80); box-shadow:0 0 18px rgba(216,178,90,.35);}
    .hero h2{
      margin:12px 0 10px;
      font-size:38px; line-height:1.02; letter-spacing:-.03em;
      text-transform:uppercase;
    }
    .hero h2 span{
      background:linear-gradient(90deg, var(--gold2), #fff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .hero p{
      margin:0;
      color:rgba(255,255,255,.80);
      max-width:78ch;
      font-size:15px;
      line-height:1.6;
    }
    .ctas{display:flex; gap:10px; flex-wrap:wrap; margin-top:16px}
    .btn{
      appearance:none; border:none; cursor:pointer;
      padding:12px 14px; border-radius:14px;
      color:var(--text);
      background:rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.14);
      text-decoration:none;
      display:inline-flex; gap:10px; align-items:center;
      transition:transform .10s ease, background .10s ease, border-color .10s ease;
      font-size:14px;
      user-select:none;
    }
    .btn:hover{transform:translateY(-1px); background:rgba(255,255,255,.10); border-color:rgba(255,255,255,.22)}
    .btn.primary{
      background:linear-gradient(135deg, rgba(216,178,90,.30), rgba(255,255,255,.08));
      border-color:rgba(216,178,90,.38);
    }
    .btn.primary:hover{
      background:linear-gradient(135deg, rgba(216,178,90,.36), rgba(255,255,255,.10));
    }
    .btn.red{
      background:linear-gradient(135deg, rgba(255,59,59,.22), rgba(255,255,255,.06));
      border-color:rgba(255,59,59,.35);
    }
    .btn.red:hover{
      background:linear-gradient(135deg, rgba(255,59,59,.28), rgba(255,255,255,.08));
    }
    .mini{padding:10px 12px;border-radius:12px;font-size:13px}

    /* info chips */
    .chips{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .chip{
      display:inline-flex; gap:8px; align-items:center;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.20);
      padding:7px 10px; border-radius:999px;
      font-size:12.5px; color:rgba(255,255,255,.78);
    }
    .chip b{color:rgba(255,255,255,.92)}
    .chip .c{width:7px;height:7px;border-radius:999px;background:var(--gold)}
    .chip .c.red{background:var(--red)}

    /* layout */
    .grid{margin-top:14px; display:grid; grid-template-columns: 1.25fr .75fr; gap:12px;}
    @media (max-width: 980px){ .grid{grid-template-columns:1fr} }

    .card{
      border-radius:var(--r);
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      box-shadow:0 14px 40px rgba(0,0,0,.35);
      padding:16px;
    }
    .card h3{margin:0 0 10px; font-size:16px;}
    .sub{color:var(--muted); font-size:13px; line-height:1.55; margin:0 0 12px;}

    /* events */
    .events{display:grid; gap:10px}
    .event{
      padding:14px;
      border-radius:16px;
      background:rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      display:grid;
      grid-template-columns: 1fr auto;
      gap:10px;
      align-items:center;
    }
    .event strong{font-size:14px}
    .event .meta{margin-top:6px; color:var(--muted); font-size:12.5px; line-height:1.45}
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      font-family:var(--mono); font-size:11px; letter-spacing:.12em; text-transform:uppercase;
      color:rgba(255,255,255,.82);
      border:1px solid rgba(216,178,90,.34);
      background:rgba(216,178,90,.10);
      padding:8px 10px; border-radius:999px; white-space:nowrap;
    }
    .badge.red{border-color:rgba(255,59,59,.40); background:rgba(255,59,59,.10)}
    .event .actions{display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;}

    /* countdown */
    .countwrap{
      display:grid; gap:10px;
      padding:14px; border-radius:16px;
      background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      border:1px solid rgba(255,255,255,.12);
    }
    .counttitle{display:flex; justify-content:space-between; gap:10px; align-items:center}
    .counttitle span{color:var(--muted); font-size:12.5px}
    .count{display:flex; gap:10px; flex-wrap:wrap;}
    .unit{
      min-width:92px; padding:12px 12px; border-radius:14px;
      background:rgba(0,0,0,.25); border:1px solid rgba(255,255,255,.10);
    }
    .num{font-size:20px; font-family:var(--mono); color:var(--gold2)}
    .lbl{font-size:12px; color:var(--muted); margin-top:4px}

    /* role randomizer */
    .rolebox{
      display:grid; gap:10px;
      padding:14px; border-radius:16px;
      background:rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
    }
    .role{
      font-family:var(--mono);
      font-size:18px;
      letter-spacing:.04em;
      color:var(--gold2);
    }
    .small{font-size:12.5px;color:var(--muted);line-height:1.5;margin:0}

    /* sections */
    .section{margin-top:12px}
    .split{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    @media (max-width: 980px){ .split{grid-template-columns:1fr} }

    /* hub */
    .tabs{display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 0}
    .tab{
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      color:var(--muted);
      border-radius:999px;
      padding:8px 10px;
      font-size:12.5px;
      cursor:pointer;
    }
    .tab[aria-selected="true"]{
      color:var(--text);
      border-color:rgba(216,178,90,.35);
      background:rgba(216,178,90,.10);
    }
    .panel{display:none}
    .panel.active{display:block}

    table{width:100%;border-collapse:collapse}
    th,td{padding:10px 8px;border-bottom:1px solid rgba(255,255,255,.10);text-align:left;font-size:13.5px}
    th{color:rgba(255,255,255,.78);font-family:var(--mono);font-size:12px;letter-spacing:.10em;text-transform:uppercase}
    .pill2{
      display:inline-flex;gap:8px;align-items:center;border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.22);padding:6px 10px;border-radius:999px;font-size:12px;color:var(--muted)
    }

    /* Instagram posts grid */
    .iggrid{display:grid; grid-template-columns:repeat(3, 1fr); gap:10px}
    @media (max-width: 900px){.iggrid{grid-template-columns:repeat(2, 1fr)}}
    @media (max-width: 520px){.iggrid{grid-template-columns:1fr}}
    .igcard{
      border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.25);
      min-height:210px;
      position:relative;
    }
    .igcard .top{
      padding:10px 12px;
      display:flex; justify-content:space-between; gap:10px; align-items:center;
      border-bottom:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.22);
    }
    .igcard .top b{font-size:12.5px; color:rgba(255,255,255,.86)}
    .igcard .top span{font-size:12px; color:var(--muted)}
    .igcard .body{padding:12px}
    .igembed{
      width:100%;
      border:0;
      border-radius:12px;
      background:#000;
      min-height:380px;
    }
    .igfallback{
      padding:14px;
      border-radius:12px;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:rgba(255,255,255,.82);
      font-size:13px;
      line-height:1.55;
    }

    /* YouTube */
    .yt{aspect-ratio:16/9;width:100%;border:0;border-radius:16px;background:#000}

    footer{margin-top:16px;color:var(--muted);font-size:12.5px;line-height:1.6;text-align:center}
    footer a{color:rgba(255,255,255,.78)}
    .sep{opacity:.35; padding:0 8px}
  </style>
</head>

<body>
  <div class="grain"></div>

  <div class="wrap">
    <div class="topbar">
      <a class="brand" href="#top" aria-label="–ú–∞—Ñ—ñ—è –ö–∏–ª—å">
        <div class="logo">K</div>
        <div>
          <h1>–ú–∞—Ñ—ñ—è –ö–∏–ª—å ¬∑ <span style="color:var(--gold2)">Mafia Kiel</span></h1>
          <p>–ö–ª–∞—Å–∏—á–Ω–∞ –º–∞—Ñ—ñ—è —â–æ–ø‚Äô—è—Ç–Ω–∏—Ü—ñ ¬∑ Kiel</p>
        </div>
      </a>
      <div class="pillrow">
        <div class="pill"><span class="dot"></span> Brahmsweg 17 ¬∑ 24159 Kiel</div>
        <div class="pill"><span class="dot red"></span> –¢–µ–º–∏ & Dress code</div>
      </div>
    </div>

    <section class="hero" id="top">
      <div class="laser"></div>
      <div class="spark"></div>

      <div class="heroGrid">
        <div class="heroLeft">
          <div class="kicker"><span class="mark"></span> Kieler Mafia Club</div>
          <h2>MAFIA <span>FRIDAY</span> ¬∑ KIEL</h2>
          <p>
            –ù—ñ–∫–æ–ª–∏ –Ω–µ –≥—Ä–∞–≤(–ª–∞) –≤ –º–∞—Ñ—ñ—é? –ù–∞–≤—á–∏–º–æ ‚úåÔ∏è
            –°–ø–æ—á–∞—Ç–∫—É –∫–æ—Ä–æ—Ç–∫–∏–π –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å, –¥–∞–ª—ñ ‚Äî —ñ–≥—Ä–∏, —ñ–Ω—Ç—Ä–∏–≥–∏ —Ç–∞ –Ω–∞–π–∫—Ä–∞—â–∞ –∫–æ–º–ø–∞–Ω—ñ—è.
          </p>

          <div class="chips">
            <span class="chip"><span class="c"></span> <b>17:30</b> –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å</span>
            <span class="chip"><span class="c"></span> <b>18:30</b> —ñ–≥—Ä–∏</span>
            <span class="chip"><span class="c red"></span> —ñ–Ω–∫–æ–ª–∏: <b>Total Black</b></span>
          </div>

          <div class="ctas">
            <a class="btn primary" id="btnSignup" href="#"><span>üïµÔ∏è</span> –ó–∞–ø–∏—Å–∞—Ç–∏—Å—è</a>
            <a class="btn" id="btnIG" href="https://instagram.com/kieler.mafia.club" target="_blank" rel="noopener"><span>üì∏</span> Instagram</a>
            <a class="btn red" href="#announcements"><span>üìÖ</span> –ê–Ω–æ–Ω—Å–∏</a>
            <a class="btn" href="#club"><span>üñ§</span> –ü—Ä–æ –∫–ª—É–±</a>
            <a class="btn" href="#hub"><span>üèÜ</span> –†–µ–π—Ç–∏–Ω–≥</a>
          </div>
        </div>

        <div class="heroRight">
          <div class="phone" aria-label="Featured Instagram reel">
            <div class="phoneTop">
              <b>Featured</b>
              <span id="heroTag">REEL</span>
            </div>
            <div class="phoneBody" id="heroEmbedWrap">
              <!-- injected by JS -->
            </div>
          </div>
        </div>

      </div>
    </section>

    <section class="grid section">
      <div class="card" id="announcements">
        <h3>–ê–Ω–æ–Ω—Å–∏ –Ω–∞–π–±–ª–∏–∂—á–∏—Ö —ñ–≥–æ—Ä</h3>
        <p class="sub">–ö–Ω–æ–ø–∫–∞ ‚ÄúAdd to Calendar‚Äù –¥–æ–¥–∞—î –ø–æ–¥—ñ—é. –ó–∞–ø–∏—Å ‚Äî —á–µ—Ä–µ–∑ DM –∞–±–æ email (–∫–Ω–æ–ø–∫–∞ ‚Äú–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è‚Äù).</p>
        <div class="events" id="events"></div>
      </div>

      <div class="card">
        <h3>–î–æ –Ω–∞—Å—Ç—É–ø–Ω–æ—ó –≥—Ä–∏</h3>
        <div class="countwrap">
          <div class="counttitle">
            <span id="nextLabel">–ù–∞—Å—Ç—É–ø–Ω–∞ –≥—Ä–∞: ‚Äî</span>
            <span id="nextMeta">‚Äî</span>
          </div>
          <div class="count" aria-live="polite">
            <div class="unit"><div class="num" id="d">--</div><div class="lbl">–¥–Ω—ñ–≤</div></div>
            <div class="unit"><div class="num" id="h">--</div><div class="lbl">–≥–æ–¥</div></div>
            <div class="unit"><div class="num" id="m">--</div><div class="lbl">—Ö–≤</div></div>
            <div class="unit"><div class="num" id="s">--</div><div class="lbl">—Å–µ–∫</div></div>
          </div>
        </div>

        <div style="height:12px"></div>

        <h3>–•—Ç–æ —Ç–∏ —Å—å–æ–≥–æ–¥–Ω—ñ? üé≠</h3>
        <div class="rolebox">
          <div class="role" id="role">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–í–∏–ø–∞–¥–∫–æ–≤–∞ —Ä–æ–ª—å‚Äù</div>
          <p class="small">–§–∞–Ω–æ–≤–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∏ (–Ω–µ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π —Ä–æ–∑–ø–æ–¥—ñ–ª —Ä–æ–ª–µ–π üòâ).</p>
          <button class="btn mini" id="btnRole" type="button">üé≤ –í–∏–ø–∞–¥–∫–æ–≤–∞ —Ä–æ–ª—å</button>
        </div>
      </div>
    </section>

    <section class="split section" id="club">
      <div class="card">
        <h3>–ü—Ä–æ –∫–ª—É–±</h3>
        <p class="sub">
          –ú–∏ –≥—Ä–∞—î–º–æ –≤ –∫–ª–∞—Å–∏—á–Ω—É –º–∞—Ñ—ñ—é —â–æ–ø‚Äô—è—Ç–Ω–∏—Ü—ñ –≤ –ö—ñ–ª—ñ. –ù–æ–≤–∞—á–∫–∞–º ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å.
          –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ ‚Äú—è–∫ –Ω–∞ –∞—Ñ—ñ—à—ñ‚Äù: —Ç–µ–º–∏, –¥—Ä–µ—Å-–∫–æ–¥, —Ñ–æ—Ç–æ/–≤—ñ–¥–µ–æ —Ç–∞ —Ç—É—Ä–Ω—ñ—Ä–Ω—ñ –≤–µ—á–æ—Ä–∏.
        </p>
        <div class="chips">
          <span class="chip"><span class="c"></span> –õ–æ–∫–∞—Ü—ñ—è: <b>Brahmsweg 17</b></span>
          <span class="chip"><span class="c"></span> –ú—ñ—Å—Ç–æ: <b>Kiel</b></span>
          <span class="chip"><span class="c red"></span> DM: <b>@kieler.mafia.club</b></span>
        </div>
        <div style="height:10px"></div>
        <p class="sub" style="margin:0">
          <b>–Ø–∫ –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è:</b> –Ω–∞—Ç–∏—Å–Ω–∏ ‚Äú–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è‚Äù –∞–±–æ –ø–∏—à–∏ –≤ DM.
          –£ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ –≤–∫–∞–∂–∏: <i>–¥–∞—Ç–∞/—Ç–µ–º–∞, —ñ–º‚Äô—è, —Å–∫—ñ–ª—å–∫–∏ –ª—é–¥–µ–π</i>.
        </p>
      </div>

      <div class="card" id="rules">
        <h3>–ü—Ä–∞–≤–∏–ª–∞ / FAQ</h3>
        <p class="sub">–ö–æ—Ä–æ—Ç–∫–æ –ø—Ä–æ —Ñ–æ—Ä–º–∞—Ç. –í–µ–¥—É—á–∏–π –ø–æ—è—Å–Ω–∏—Ç—å –¥–µ—Ç–∞–ª—ñ –Ω–∞ –º—ñ—Å—Ü—ñ.</p>
        <ul class="sub" style="margin:0; padding-left:18px; line-height:1.7">
          <li><b>17:30</b> ‚Äî –º—ñ–Ω—ñ-–Ω–∞–≤—á–∞–Ω–Ω—è –¥–ª—è –Ω–æ–≤–∞—á–∫—ñ–≤</li>
          <li><b>18:30</b> ‚Äî —ñ–≥—Ä–∏ (–≤–µ–¥—É—á–∏–π –∫–µ—Ä—É—î –ø—Ä–æ—Ü–µ—Å–æ–º)</li>
          <li><b>–î—Ä–µ—Å-–∫–æ–¥</b> —ñ–Ω–∫–æ–ª–∏ —Ç–µ–º–∞—Ç–∏—á–Ω–∏–π (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ Total Black)</li>
          <li><b>–í–≤—ñ—á–ª–∏–≤—ñ—Å—Ç—å</b> —ñ –ø–æ–≤–∞–≥–∞ ‚Äî must</li>
        </ul>
      </div>
    </section>

    <section class="card section" id="photos">
      <h3>–§–æ—Ç–æ / –ø–æ—Å—Ç–∏ –∑ Instagram</h3>
      <p class="sub">
    
      </p>
      <div class="iggrid" id="iggrid"></div>
    </section>

    <section class="card section" id="hub">
      <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center">
        <h3 style="margin:0">–ö–ª—É–±–Ω–∏–π Hub</h3>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <a class="btn mini" href="#announcements">üìÖ –ê–Ω–æ–Ω—Å–∏</a>
          <a class="btn mini" href="#media">üé¨ –í—ñ–¥–µ–æ</a>
        </div>
      </div>

      <div class="tabs" role="tablist" aria-label="Hub tabs">
        <button class="tab" role="tab" aria-selected="true" data-tab="rank">–†–µ–π—Ç–∏–Ω–≥</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="tours">–¢—É—Ä–Ω—ñ—Ä–∏</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="players">–ì—Ä–∞–≤—Ü—ñ</button>
        <button class="tab" role="tab" aria-selected="false" data-tab="bday">–î–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è</button>
      </div>

      <div class="panel active" id="rank" role="tabpanel">
        <p class="sub">–†–µ–π—Ç–∏–Ω–≥ —Ä–∞—Ö—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–æ —Ç—É—Ä–Ω—ñ—Ä–∞—Ö –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ä–æ–∫—É.</p>
        <table id="rankTable"></table>
      </div>

      <div class="panel" id="tours" role="tabpanel">
        <div id="tournaments"></div>
      </div>

      <div class="panel" id="players" role="tabpanel">
        <p class="sub">–ö–ª—ñ–∫–Ω–∏ –Ω–∞ –≥—Ä–∞–≤—Ü—è ‚Äî –ø–æ–∫–∞–∂–µ–º–æ —É—á–∞—Å—Ç—å —É —Ç—É—Ä–Ω—ñ—Ä–∞—Ö —Ü—å–æ–≥–æ —Ä–æ–∫—É —Ç–∞ –ø—Ä–∏–∑–æ–≤—ñ.</p>
        <div style="display:grid;grid-template-columns:1.1fr .9fr;gap:12px">
          <div class="card" style="box-shadow:none;border-color:rgba(255,255,255,.10)">
            <table id="playersTable"></table>
          </div>
          <div class="card" style="box-shadow:none;border-color:rgba(255,255,255,.10)">
            <h3 style="margin:0 0 8px;font-size:15px" id="pTitle">–û–±–µ—Ä–∏ –≥—Ä–∞–≤—Ü—è</h3>
            <div class="sub" id="pBody">–ü–æ–∫–∞–∂–µ–º–æ —Ç—É—Ä–Ω—ñ—Ä–∏, –º—ñ—Å—Ü—è —Ç–∞ –ø—Ä–∏–∑–æ–≤—ñ –∑–∞ –ø–æ—Ç–æ—á–Ω–∏–π —Ä—ñ–∫.</div>
          </div>
        </div>
      </div>

      <div class="panel" id="bday" role="tabpanel">
        <p class="sub">–ù–∞–π–±–ª–∏–∂—á—ñ –¥–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è ‚Äî –∑–≤–µ—Ä—Ö—É.</p>
        <table id="bdayTable"></table>
      </div>
    </section>

    <section class="card section" id="media">
      <h3>–í—ñ–¥–µ–æ / –º–µ–¥—ñ–∞</h3>
      <p class="sub">YouTube –º–æ–∂–Ω–∞ –≤–±—É–¥—É–≤–∞—Ç–∏, –∞ Reels/–ø–æ—Å—Ç–∏ ‚Äî —è–∫ Instagram embed.</p>
      <div id="mediaList"></div>
    </section>

    <footer>
      <div>
        DM: <a href="https://instagram.com/oksana_kolivanova" target="_blank" rel="noopener">@oksana_kolivanova</a>
        <span class="sep">¬∑</span>
        <a href="https://instagram.com/oksanashvetsukr" target="_blank" rel="noopener">@oksanashvetsukr</a>
        <span class="sep">¬∑</span>
        Instagram –∫–ª—É–±—É: <a href="https://instagram.com/kieler.mafia.club" target="_blank" rel="noopener">@kieler.mafia.club</a>
      </div>
      <div style="margin-top:6px">¬© <span id="year"></span> Mafia Kiel ¬∑ made with üñ§</div>
    </footer>
  </div>

  <script>
    // =========================
    // EDIT: –∫–æ–Ω—Ç–∞–∫—Ç–∏ / –∑–∞–ø–∏—Å
    // =========================
    const CLUB = {
      instagram: "https://instagram.com/kieler.mafia.club",
      email: "kieler.mafia.club@gmail.com",
      location: "Brahmsweg 17, 24159 Kiel",
      hosts: [
        "https://instagram.com/oksana_kolivanova",
        "https://instagram.com/oksanashvetsukr"
      ]
    };

    // =========================
    // EDIT: HERO featured (—Ç–µ, —â–æ ‚Äú–ø—ñ–¥—Ç—è–≥—É—î–º–æ –∑–≤–µ—Ä—Ö—É‚Äù)
    // =========================
    const HERO_FEATURE = {
      title: "Reel",
      url: "https://www.instagram.com/reel/DPd1lejDEOf/"
    };

    // =========================
    // EDIT: –ê–ù–û–ù–°–ò
    // =========================
    const EVENTS = [
      {
        title: "MAFIA FRIDAY 13 ¬∑ TOTAL BLACK DRESS CODE",
        dateTime: "2026-03-13T18:30:00+01:00",
        warmup: "17:30 ¬∑ –º–∞–π—Å—Ç–µ—Ä-–∫–ª–∞—Å",
        game: "18:30 ¬∑ —ñ–≥—Ä–∏",
        price: "–ü–µ—Ä—à–∏–π –≤–µ—á—ñ—Ä ‚Äî –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ",
        place: CLUB.location,
        dress: "Total Black",
        tags: ["dresscode","special"],
      },
      {
        title: "Friday Mafia Night",
        dateTime: "2026-03-20T18:30:00+01:00",
        warmup: "17:30 ¬∑ –¥–ª—è –Ω–æ–≤–∞—á–∫—ñ–≤",
        game: "18:30 ¬∑ —ñ–≥—Ä–∏",
        price: "–£—Ç–æ—á–Ω—é–π —É DM",
        place: CLUB.location,
        dress: "Free style",
        tags: ["regular"],
      }
    ];

    // =========================
    // EDIT: Instagram posts (—Ñ–æ—Ç–æ/–ø–æ—Å—Ç–∏)
    // =========================
    const IG_POSTS = [
      { title:"–§–æ—Ç–æ / —Ä–µ–ø–æ—Ä—Ç", url:"https://www.instagram.com/p/DUyP-TADaGV/" },
      { title:"–§–æ—Ç–æ (img index)", url:"https://www.instagram.com/p/DUyP-TADaGV/?img_index=1" },
      { title:"–ê–Ω–æ–Ω—Å", url:"https://www.instagram.com/p/DP7QW1BDD-4/" },
      { title:"–§–æ—Ç–æ / —Ä–µ–ø–æ—Ä—Ç", url:"https://www.instagram.com/p/DUdPFrajfEd/" },
      { title:"–ê–Ω–æ–Ω—Å", url:"https://www.instagram.com/p/DQWTfb7DUG6/" },
    ];

    // =========================
    // EDIT: HUB data + media
    // =========================
    const DATA = {
      tournaments: [
        {
          name:"Spring Tournament #1",
          date:"2026-03-20",
          link:"",
          participants:[
            {nick:"foxxy", place:1, prize:50},
            {nick:"an.krsh", place:2, prize:30},
            {nick:"yalemonchik", place:3, prize:20},
          ]
        }
      ],
      players: [
        { nick:"foxxy", birthday:"2000-05-12" },
        { nick:"an.krsh", birthday:"1998-10-02" },
        { nick:"yalemonchik", birthday:"1997-02-14" },
      ],
      media: [
        { type:"instagram", title:"Reel (–∫–ª—É–±)", url:"https://www.instagram.com/reel/DPd1lejDEOf/" },
        { type:"instagram", title:"–ü–æ—Å—Ç (—Ä–µ–ø–æ—Ä—Ç)", url:"https://www.instagram.com/p/DUyP-TADaGV/" },
        { type:"youtube", title:"Best moments (–ø—Ä–∏–∫–ª–∞–¥)", url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ" },
      ]
    };

    // =========================
    // Helpers
    // =========================
    const $ = (id)=>document.getElementById(id);

    function fmtDateTime(iso){
      const d = new Date(iso);
      return d.toLocaleString(undefined,{weekday:"short", year:"numeric", month:"short", day:"2-digit", hour:"2-digit", minute:"2-digit"});
    }
    function fmtDate(ymd){
      const d = new Date(ymd+"T12:00:00");
      return d.toLocaleDateString(undefined,{year:"numeric", month:"short", day:"2-digit"});
    }

    // normalize IG url to embed
    function normalizeIG(url){
      try{
        const u = new URL(url);
        const parts = u.pathname.split("/").filter(Boolean);
        // support /p/{code}/, /reel/{code}/, /tv/{code}/
        const types = ["p","reel","tv"];
        for(const t of types){
          const idx = parts.indexOf(t);
          if(idx >= 0 && parts[idx+1]){
            const code = parts[idx+1];
            return { type:t, code, embed:`https://www.instagram.com/${t}/${code}/embed` };
          }
        }
      }catch(e){}
      return { type:"", code:"", embed:"" };
    }

    function buildICS(ev){
      const start = new Date(ev.dateTime);
      const end = new Date(start.getTime() + 3*60*60*1000);
      const pad = (n)=> String(n).padStart(2,"0");
      const toICS = (d)=>{
        const u = new Date(d.getTime() - d.getTimezoneOffset()*60000);
        return `${u.getUTCFullYear()}${pad(u.getUTCMonth()+1)}${pad(u.getUTCDate())}T${pad(u.getUTCHours())}${pad(u.getUTCMinutes())}${pad(u.getUTCSeconds())}Z`;
      };
      const uid = `mafia-kiel-${start.getTime()}@mafiakiel`;
      const title = ev.title.replace(/[,;]/g," ");
      const loc = (ev.place || "").replace(/[,;]/g," ");
      const desc = [ev.warmup||"", ev.game||"", ev.price?`–¶—ñ–Ω–∞: ${ev.price}`:"", ev.dress?`Dress code: ${ev.dress}`:"", "–ó–∞–ø–∏—Å: DM/Email"].filter(Boolean).join("\\n");
      const ics =
`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Mafia Kiel//Events//UA
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
UID:${uid}
DTSTAMP:${toICS(new Date())}
DTSTART:${toICS(start)}
DTEND:${toICS(end)}
SUMMARY:${title}
LOCATION:${loc}
DESCRIPTION:${desc}
END:VEVENT
END:VCALENDAR`;
      return "data:text/calendar;charset=utf-8," + encodeURIComponent(ics);
    }

    // =========================
    // Hero embed (phone poster)
    // =========================
    (function renderHeroEmbed(){
      const n = normalizeIG(HERO_FEATURE.url);
      $("heroTag").textContent = (n.type || HERO_FEATURE.title || "IG").toUpperCase();
      const wrap = $("heroEmbedWrap");
      if(!n.embed){
        wrap.innerHTML = `
          <div class="igfallback">
            –ù–µ –≤–¥–∞–ª–æ—Å—è –ø—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ embed. –í—ñ–¥–∫—Ä–∏–π: <a href="${HERO_FEATURE.url}" target="_blank" rel="noopener" style="color:rgba(255,255,255,.85)">${HERO_FEATURE.url}</a>
          </div>
          <div style="height:10px"></div>
          <a class="btn mini" href="${HERO_FEATURE.url}" target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ ‚Üó</a>
        `;
        return;
      }
      wrap.innerHTML = `
        <iframe class="igHeroEmbed" src="${n.embed}" loading="lazy" scrolling="no" allowtransparency="true"></iframe>
        <div style="height:10px"></div>
        <a class="btn mini" href="${HERO_FEATURE.url}" target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ Reel ‚Üó</a>
      `;
    })();

    // =========================
    // Signup
    // =========================
    function signup(){
      const subject = encodeURIComponent("–ó–∞–ø–∏—Å –Ω–∞ –º–∞—Ñ—ñ—é ¬∑ Mafia Kiel");
      const body = encodeURIComponent(
        "–ü—Ä–∏–≤—ñ—Ç! –•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –º–∞—Ñ—ñ—é.\n" +
        "–î–∞—Ç–∞/—Ç–µ–º–∞: ____\n–Ü–º‚Äô—è: ____\n–°–∫—ñ–ª—å–∫–∏ –ª—é–¥–µ–π: ____\n\n" +
        "–õ–æ–∫–∞—Ü—ñ—è: " + CLUB.location + "\nInstagram: " + CLUB.instagram
      );
      const mailto = `mailto:${CLUB.email}?subject=${subject}&body=${body}`;
      const msg =
`–Ø–∫ –∑–∞–ø–∏—Å–∞—Ç–∏—Å—è?
1) DM –∫–ª—É–±—É: ${CLUB.instagram}
2) DM –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ç–æ—Ä–∞–º:
- ${CLUB.hosts[0]}
- ${CLUB.hosts[1]}
3) Email: ${CLUB.email}

–ù–∞—Ç–∏—Å–Ω–∏ OK ‚Äî –≤—ñ–¥–∫—Ä–∏—é Email.`;
      if(confirm(msg)) window.location.href = mailto;
    }
    $("btnSignup").addEventListener("click",(e)=>{e.preventDefault(); signup();});

    // =========================
    // Render events + countdown
    // =========================
    const $events = $("events");

    function renderEvents(){
      $events.innerHTML = "";
      const sorted = [...EVENTS].sort((a,b)=> new Date(a.dateTime)-new Date(b.dateTime));
      sorted.forEach(ev=>{
        const badge = ev.tags?.includes("dresscode") ? `<span class="badge red">DRESS CODE</span>` : `<span class="badge">FRIDAY</span>`;
        const dress = ev.dress && ev.dress.toLowerCase().includes("black")
          ? `<span class="badge red">TOTAL BLACK</span>`
          : (ev.dress ? `<span class="badge">${ev.dress}</span>` : "");
        const icsHref = buildICS(ev);

        const el = document.createElement("div");
        el.className = "event";
        el.innerHTML = `
          <div>
            <div style="display:flex; gap:8px; flex-wrap:wrap; align-items:center">${badge} ${dress}</div>
            <div style="margin-top:8px">
              <strong>${ev.title}</strong>
              <div class="meta">
                <div>üóìÔ∏è ${fmtDateTime(ev.dateTime)}</div>
                <div>üïò ${ev.warmup || ""}${ev.game ? " ¬∑ " + ev.game : ""}</div>
                <div>üìç ${ev.place || "Kiel"}</div>
                ${ev.price ? `<div>üí∂ ${ev.price}</div>` : ""}
              </div>
            </div>
          </div>
          <div class="actions">
            <button class="btn mini primary" data-signup="1">üïµÔ∏è –ó–∞–ø–∏—Å–∞—Ç–∏—Å—è</button>
            <a class="btn mini" href="${icsHref}" download="mafia-kiel.ics">‚ûï Add to Calendar</a>
          </div>
        `;
        $events.appendChild(el);
      });
      setNext(sorted);
    }

    function setNext(sorted){
      const now = new Date();
      const next = sorted.find(ev => new Date(ev.dateTime) > now) || sorted[0];
      window.__NEXT = next;
      $("nextLabel").textContent = next ? `–ù–∞—Å—Ç—É–ø–Ω–∞ –≥—Ä–∞: ${next.title}` : "–ù–∞—Å—Ç—É–ø–Ω–∞ –≥—Ä–∞: ‚Äî";
      $("nextMeta").textContent  = next ? fmtDateTime(next.dateTime) : "‚Äî";
    }

    function tick(){
      const next = window.__NEXT;
      if(!next) return;
      const now = new Date().getTime();
      const target = new Date(next.dateTime).getTime();
      let diff = Math.max(0, target - now);

      const d = Math.floor(diff / (1000*60*60*24)); diff -= d*(1000*60*60*24);
      const h = Math.floor(diff / (1000*60*60)); diff -= h*(1000*60*60);
      const m = Math.floor(diff / (1000*60)); diff -= m*(1000*60);
      const s = Math.floor(diff / 1000);

      $("d").textContent = String(d).padStart(2,"0");
      $("h").textContent = String(h).padStart(2,"0");
      $("m").textContent = String(m).padStart(2,"0");
      $("s").textContent = String(s).padStart(2,"0");
    }

    document.addEventListener("click",(e)=>{
      const btn = e.target.closest("[data-signup]");
      if(btn){ e.preventDefault(); signup(); }
    });

    // =========================
    // Role randomizer
    // =========================
    const ROLES = [
      {name:"–ú–∏—Ä–Ω–∏–π –º–µ—à–∫–∞–Ω–µ—Ü—å", hint:"–°–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–π, –∞–Ω–∞–ª—ñ–∑—É–π, –≥–æ–ª–æ—Å—É–π."},
      {name:"–ú–∞—Ñ—ñ—è", hint:"–¢—Ä–∏–º–∞–π –ª—ñ–Ω—ñ—é, –Ω–µ –ø–∞–ª–∏—Å—å üòÑ"},
      {name:"–®–µ—Ä–∏—Ñ", hint:"–°—Ç–∞–≤ –ø–∏—Ç–∞–Ω–Ω—è —ñ —à—É–∫–∞–π –ø—Ä–∞–≤–¥—É."},
      {name:"–î–æ–Ω", hint:"–ö–µ—Ä—É—î—à –≥—Ä–æ—é ‚Äî –∞–ª–µ —Ç–∏—Ö–æ."},
      {name:"–î–æ–∫—Ç–æ—Ä", hint:"–†—è—Ç—É–π –º—ñ—Å—Ç–æ (—è–∫—â–æ —Ä–æ–ª—å —É —Ñ–æ—Ä–º–∞—Ç—ñ)."},
    ];
    $("btnRole").addEventListener("click", ()=>{
      const r = ROLES[Math.floor(Math.random()*ROLES.length)];
      $("role").textContent = `${r.name} ‚Äî ${r.hint}`;
    });

    <div style="height:14px"></div>

<h3>–ê–ª—ñ–±—ñ —Ç–∞ —Ü–∏—Ç–∞—Ç–∞ –¥–Ω—è üñ§</h3>
<div class="rolebox">
  <div class="role" id="alibiText">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∞–ª—ñ–±—ñ‚Äù</div>
  <button class="btn mini" id="btnAlibi" type="button">üßæ –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∞–ª—ñ–±—ñ</button>

  <div style="height:14px"></div>

  <div class="role" id="quoteText">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äú–¶–∏—Ç–∞—Ç–∞ –¥–Ω—è‚Äù</div>
  <button class="btn mini" id="btnQuote" type="button">üñ§ –¶–∏—Ç–∞—Ç–∞ –¥–Ω—è</button>
</div>
// ===========================
// Alibi Generator
// ===========================
const ALIBIS = [
  "–Ø –ø—Ä–æ—Å—Ç–æ –ø—Ä–∏–π—à–æ–≤(–ª–∞) –∑–∞ –∫–∞–≤–æ—é‚Ä¶ —ñ –≤–∏–ø–∞–¥–∫–æ–≤–æ –æ–ø–∏–Ω–∏–≤—Å—è(–ª–∞—Å—å) —Ç—É—Ç ‚òï",
  "–Ø –º–æ–≤—á–∞–≤(–ª–∞), –±–æ –∞–Ω–∞–ª—ñ–∑—É–≤–∞–≤(–ª–∞), –∞ –Ω–µ —Ç–æ–º—É —â–æ —è –º–∞—Ñ—ñ—è.",
  "–ú–µ–Ω–µ –ø—ñ–¥—Å—Ç–∞–≤–∏–ª–∏. –Ø –∑–∞–Ω–∞–¥—Ç–æ –∫—Ä–∞—Å–∏–≤–∏–π(–∞), —â–æ–± –±—É—Ç–∏ –º–∞—Ñ—ñ—î—é üòé",
  "–Ø –≥–æ–ª–æ—Å—É–≤–∞–≤(–ª–∞) –ª–æ–≥—ñ—á–Ω–æ. –Ø–∫—â–æ —Ü–µ –∑–ª–æ—á–∏–Ω ‚Äî –∞—Ä–µ—à—Ç–æ–≤—É–π—Ç–µ.",
  "–Ø –ø—Ä–æ—Å—Ç–æ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞–≤(–ª–∞). –ú—ñ—Å—Ç–æ –ø–æ—Ç—Ä–µ–±—É—î –º


    // =========================
    // Instagram tiles
    // =========================
    const grid = $("iggrid");
    grid.innerHTML = IG_POSTS.map((p,i)=>{
      const n = normalizeIG(p.url);
      const title = p.title || "Instagram";
      const label = n.code ? `#${n.code}` : `Post ${i+1}`;
      const iframe = n.embed
        ? `<iframe class="igembed" src="${n.embed}" loading="lazy" scrolling="no" allowtransparency="true"></iframe>`
        : `<div class="igfallback">–ü–æ—Å–∏–ª–∞–Ω–Ω—è: <a href="${p.url}" target="_blank" rel="noopener" style="color:rgba(255,255,255,.85)">${p.url}</a></div>`;
      return `
        <div class="igcard">
          <div class="top">
            <b>${title}</b>
            <span>${label}</span>
          </div>
          <div class="body">
            ${iframe}
            <div style="height:10px"></div>
            <a class="btn mini" href="${p.url}" target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ ‚Üó</a>
          </div>
        </div>
      `;
    }).join("");

    // =========================
    // Hub tabs
    // =========================
    const tabs = Array.from(document.querySelectorAll(".tab"));
    const panels = Array.from(document.querySelectorAll(".panel"));
    tabs.forEach(t=>{
      t.addEventListener("click", ()=>{
        tabs.forEach(x=>x.setAttribute("aria-selected","false"));
        t.setAttribute("aria-selected","true");
        const id = t.dataset.tab;
        panels.forEach(p=>p.classList.toggle("active", p.id===id));
      });
    });

    // =========================
    // Ranking from tournaments current year
    // =========================
    const now = new Date();
    const currentYear = now.getFullYear();
    const scoreByPlace = (p)=> p===1?10 : p===2?7 : p===3?5 : 2;
    const stats = new Map();
    function addStat(nick, updater){
      if(!stats.has(nick)) stats.set(nick, {nick, points:0, wins:0, prize:0, played:0, tours:[]});
      updater(stats.get(nick));
    }
    DATA.tournaments.forEach(t=>{
      const year = new Date(t.date+"T12:00:00").getFullYear();
      if(year !== currentYear) return;
      (t.participants||[]).forEach(p=>{
        addStat(p.nick, s=>{
          s.played += 1;
          s.points += scoreByPlace(p.place);
          s.prize += Number(p.prize||0);
          if(p.place===1) s.wins += 1;
          s.tours.push({tournament:t.name, date:t.date, place:p.place, prize:p.prize||0});
        });
      });
    });
    const rankArr = Array.from(stats.values()).sort((a,b)=> (b.points-a.points) || (b.prize-a.prize) || (b.wins-a.wins));
    $("rankTable").innerHTML = `
      <thead><tr><th>#</th><th>–ù—ñ–∫</th><th>–û—á–∫–∏</th><th>–ü–µ—Ä–µ–º–æ–≥–∏</th><th>–¢—É—Ä–Ω—ñ—Ä—ñ–≤</th><th>–ü—Ä–∏–∑–æ–≤—ñ</th></tr></thead>
      <tbody>
        ${rankArr.length? rankArr.map((r,i)=>`
          <tr><td>${i+1}</td><td><b>${r.nick}</b></td><td>${r.points}</td><td>${r.wins}</td><td>${r.played}</td><td>${r.prize}‚Ç¨</td></tr>
        `).join("") : `<tr><td colspan="6" style="color:var(--muted)">–ù–µ–º–∞—î —Ç—É—Ä–Ω—ñ—Ä—ñ–≤ —É ${currentYear} –∞–±–æ –¥–∞–Ω—ñ –Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ.</td></tr>`}
      </tbody>
    `;

    // Tournaments view
    const toursSorted = [...DATA.tournaments].sort((a,b)=> new Date(b.date)-new Date(a.date));
    $("tournaments").innerHTML = toursSorted.map(t=>{
      const parts = (t.participants||[]).sort((a,b)=> (a.place||999)-(b.place||999));
      return `
        <div class="card" style="box-shadow:none;border-color:rgba(255,255,255,.10);margin-top:10px">
          <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:center">
            <div>
              <div style="font-family:var(--mono);font-size:12px;letter-spacing:.10em;text-transform:uppercase;color:rgba(255,255,255,.70)">${fmtDate(t.date)}</div>
              <div style="margin-top:6px;font-size:15px"><b>${t.name}</b></div>
              <div class="sub">${t.link ? `–ó–≤—ñ—Ç: <a href="${t.link}" target="_blank" rel="noopener" style="color:rgba(255,255,255,.78)">–ø–æ—Å–∏–ª–∞–Ω–Ω—è</a>` : ""}</div>
            </div>
            <span class="pill2"><span class="dot"></span> –£—á–∞—Å–Ω–∏–∫—ñ–≤: ${parts.length}</span>
          </div>
          <table>
            <thead><tr><th>–ú—ñ—Å—Ü–µ</th><th>–ù—ñ–∫</th><th>–ü—Ä–∏–∑</th></tr></thead>
            <tbody>
              ${parts.length? parts.map(p=>`
                <tr><td>${p.place||""}</td><td><b>${p.nick}</b></td><td>${p.prize? p.prize+"‚Ç¨":"‚Äî"}</td></tr>
              `).join("") : `<tr><td colspan="3" style="color:var(--muted)">–ù–µ–º–∞—î –¥–∞–Ω–∏—Ö –ø–æ —É—á–∞—Å–Ω–∏–∫–∞—Ö.</td></tr>`}
            </tbody>
          </table>
        </div>
      `;
    }).join("");

    // Players + profile
    const players = [...DATA.players].sort((a,b)=> a.nick.localeCompare(b.nick));
    $("playersTable").innerHTML = `
      <thead><tr><th>–ù—ñ–∫</th><th>–¢—É—Ä–Ω—ñ—Ä–∏ ${currentYear}</th><th>–ü—Ä–∏–∑–æ–≤—ñ</th></tr></thead>
      <tbody>
        ${players.map(p=>{
          const st = stats.get(p.nick);
          const played = st?.played || 0;
          const prize  = st?.prize || 0;
          return `<tr data-nick="${p.nick}" style="cursor:pointer">
            <td><b>${p.nick}</b></td><td>${played}</td><td>${prize}‚Ç¨</td>
          </tr>`;
        }).join("")}
      </tbody>
    `;
    $("playersTable").addEventListener("click",(e)=>{
      const tr = e.target.closest("tr[data-nick]");
      if(!tr) return;
      const nick = tr.dataset.nick;
      const st = stats.get(nick);
      $("pTitle").textContent = `@${nick}`;
      if(!st){
        $("pBody").innerHTML = `<div class="sub">–£ ${currentYear} –ø–æ–∫–∏ –Ω–µ–º–∞—î —Ç—É—Ä–Ω—ñ—Ä—ñ–≤/—É—á–∞—Å—Ç—ñ –¥–ª—è —Ü—å–æ–≥–æ –≥—Ä–∞–≤—Ü—è.</div>`;
        return;
      }
      const list = st.tours.sort((a,b)=> new Date(b.date)-new Date(a.date))
        .map(x=>`<li>${fmtDate(x.date)} ¬∑ <b>${x.tournament}</b> ‚Äî –º—ñ—Å—Ü–µ: ${x.place||"‚Äî"}, –ø—Ä–∏–∑: ${x.prize||0}‚Ç¨</li>`).join("");
      $("pBody").innerHTML = `
        <div class="sub">–û—á–∫–∏: <b>${st.points}</b> ¬∑ –ü–µ—Ä–µ–º–æ–≥–∏: <b>${st.wins}</b> ¬∑ –¢—É—Ä–Ω—ñ—Ä—ñ–≤: <b>${st.played}</b> ¬∑ –ü—Ä–∏–∑–æ–≤—ñ: <b>${st.prize}‚Ç¨</b></div>
        <div style="height:10px"></div>
        <ul class="sub" style="margin:0;padding-left:18px;line-height:1.7">${list}</ul>
      `;
    });

    // Birthdays
    function nextBirthday(bday){
      const d0 = new Date(bday+"T12:00:00");
      const now = new Date();
      const d = new Date(now.getFullYear(), d0.getMonth(), d0.getDate(), 12,0,0);
      if(d < now) d.setFullYear(now.getFullYear()+1);
      return d;
    }
    const bdays = DATA.players.filter(p=>p.birthday)
      .map(p=>({nick:p.nick, birthday:p.birthday, next: nextBirthday(p.birthday)}))
      .sort((a,b)=> a.next - b.next);
    $("bdayTable").innerHTML = `
      <thead><tr><th>–ù—ñ–∫</th><th>–î–ù</th><th>–ù–∞–π–±–ª–∏–∂—á–∏–π</th></tr></thead>
      <tbody>
        ${bdays.length? bdays.map(x=>`
          <tr><td><b>${x.nick}</b></td><td>${fmtDate(x.birthday)}</td><td>${x.next.toLocaleDateString(undefined,{month:"short", day:"2-digit"})}</td></tr>
        `).join("") : `<tr><td colspan="3" style="color:var(--muted)">–î–Ω—ñ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è –Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ.</td></tr>`}
      </tbody>
    `;

    // Media
    function ytEmbed(url){
      const u = new URL(url);
      const id = u.searchParams.get("v") || (u.pathname.split("/").pop());
      return `https://www.youtube.com/embed/${id}`;
    }

    $("mediaList").innerHTML = DATA.media.map(m=>{
      if(m.type==="youtube"){
        return `
          <div class="card" style="box-shadow:none;border-color:rgba(255,255,255,.10);margin-top:10px">
            <div style="font-size:14px"><b>${m.title}</b></div>
            <div style="height:10px"></div>
            <iframe class="yt" src="${ytEmbed(m.url)}" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
        `;
      }
      if(m.type==="instagram"){
        const n = normalizeIG(m.url);
        const embed = n.embed
          ? `<iframe class="igembed" src="${n.embed}" loading="lazy" scrolling="no" allowtransparency="true"></iframe>`
          : `<div class="igfallback">–ü–æ—Å–∏–ª–∞–Ω–Ω—è: <a href="${m.url}" target="_blank" rel="noopener" style="color:rgba(255,255,255,.85)">${m.url}</a></div>`;
        return `
          <div class="igcard" style="margin-top:10px">
            <div class="top">
              <b>${m.title}</b>
              <span>${n.type ? n.type.toUpperCase() : "IG"}</span>
            </div>
            <div class="body">
              ${embed}
              <div style="height:10px"></div>
              <a class="btn mini" href="${m.url}" target="_blank" rel="noopener">–í—ñ–¥–∫—Ä–∏—Ç–∏ ‚Üó</a>
            </div>
          </div>
        `;
      }
      return `
        <div class="card" style="box-shadow:none;border-color:rgba(255,255,255,.10);margin-top:10px">
          <div style="font-size:14px"><b>${m.title}</b></div>
          <div class="sub"><a href="${m.url}" target="_blank" rel="noopener" style="color:rgba(255,255,255,.78)">${m.url}</a></div>
        </div>
      `;
    }).join("");

    // Init
    $("year").textContent = new Date().getFullYear();
    renderEvents();
    tick();
    setInterval(tick, 1000);
  </script>
</body>
</html>
